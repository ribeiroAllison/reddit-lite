import{s as t,x as e,i as n}from"./icon-732d0443.js";import{m as i,_ as r,L as s,S as o,R as a,B as u,U as h,s as c,a as l,b as f,E as d,c as p,f as v,d as _,t as m,e as g}from"./index-2807d68d.js";import{H as b,E as w,d as y,a as E,b as k,c as q,L as S}from"./devvit-effect-wrapper-b4411a13.js";import{n as C,t as A,w as I,e as T,g as L,cw as R,dW as x,W as O,v as M,a as P,_ as j,bd as N,cl as D,dX as U,I as B,l as $}from"./shell-10899a6f.js";import{D as W,a as z}from"./devvit-blocks-renderer-1655c349.js";import{A as V,c as F}from"./v2-events-2a8f7273.js";import{D as G}from"./display-theme-810099b9.js";import"./rtjson-a236ebff.js";import"./lexical-74be5bbc.js";import"./scroll-blocker-d0c6a89b.js";import"./index-9c3b783f.js";import"./payments-d1fccad6.js";import"./upload-214c7f6c.js";import"./upload-to-s3-924aa69d.js";import"./ui-strings-a3d6ed5f.js";import"./faceplate-form-f06b1f21.js";import"./form-common-utils-0a9272bf.js";import"./when-f57ec986.js";import"./choose-016e3a12.js";import"./faceplate-switch-input-11d7e644.js";import"./checked-input-element-9487863d.js";import"./faceplate-input-6d2f4135.js";import"./input-element-6687ec6f.js";import"./faceplate-carousel-f5e24e5e.js";import"./TinyGesture-b7fb4b5e.js";import"./makeEventDispatcher-0d7db2ea.js";import"./faceplate-pagination-indicator-40153a46.js";import"./text-input-f66f9653.js";import"./faceplate-text-input-acdf40f0.js";import"./live-79249cef.js";import"./faceplate-textarea-input-3e8a14df.js";import"./faceplate-dropdown-menu-cce796a3.js";import"./popper-controller-8ba8f4af.js";import"./faceplate-menu-f46e30dc.js";import"./dropdownButton-aa921299.js";import"./list-item-c0043cac.js";import"./faceplate-checkbox-input-dad388c2.js";import"./faceplate-radio-input-bafdecc2.js";class J extends Error{constructor(t,e){super("ServerCallRequired"),this.response=t,this.cause=e,this.name="CircuitBreakerResponse"}}function Q(t){return"ServerCallRequired"===t?.message}function H(t,e){let n,i,r=0;return function(...s){return i=s,n??(n=setTimeout((()=>{r=Date.now(),n=void 0;const e=i;i=void 0,t.apply(this,e)}),Math.max(0,e-(Date.now()-r)))),()=>{null!=n&&clearTimeout(n),n=void 0,i=void 0}}}var Y;function K(t){!function(t,e){if(!t)throw Error(e)}(function(t){return t.startsWith(Y.LINK)}(t),`Expected link id to start with ${Y.LINK}, got ${t}}`)}function Z(t){return K(t),t}!function(t){t.COMMENT="t1_",t.ACCOUNT="t2_",t.LINK="t3_",t.MESSAGE="t4_",t.SUBREDDIT="t5_",t.AWARD="t6_"}(Y||(Y={}));function X(t,e,n){const{width:i,height:r}=t.contentRect,s=e.getComputedStyle(n).fontSize.split("px")[0],o=s?parseFloat(s)/16:1;return{width:Math.round(i),height:Math.round(r),scale:e.devicePixelRatio,fontScale:o}}var tt,et;function nt(t){return t.hostname.split(".")[1]??t.hostname}function it(t){return`${nt(t)}@${t.actor?.version} by ${t.actor?.owner}`}!function(t){t.ENABLE_APP_LOGGING="enableAppLogging",t.ENABLE_DEBUG_LOGGING="enableDebugLogging",t.ENABLE_PLUGINS="enablePlugins",t.LOAD_BUNDLE="loadBundle",t.CALL="call",t.PLUGIN_RESPONSE="pluginResponse",t.QUIT="quit"}(tt||(tt={})),function(t){t.READY="ready",t.PLUGINS_CONFIGURED="pluginsConfigured",t.BUNDLE_LOADED="bundleLoaded",t.BUNDLE_LOAD_FAILED="bundleLoadFailed",t.RETURN="return",t.ERROR="error",t.CIRCUIT_BREAKER="circuitBreaker",t.PLUGIN_CALL="pluginCall",t.UNHANDLED_REJECTION="unhandledRejection"}(et||(et={}));const rt={$type:"devvit.cli.PlaytestProviderMessage",encode:(t,e=r.Writer.create())=>(void 0!==t.callState&&at.encode(t.callState,e.uint32(10).fork()).ldelim(),void 0!==t.connect&&ut.encode(t.connect,e.uint32(18).fork()).ldelim(),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={callState:void 0,connect:void 0};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.callState=at.decode(n,n.uint32());continue;case 2:if(18!==t)break;s.connect=ut.decode(n,n.uint32());continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({callState:ht(t.callState)?at.fromJSON(t.callState):void 0,connect:ht(t.connect)?ut.fromJSON(t.connect):void 0}),toJSON(t){const e={};return void 0!==t.callState&&(e.callState=at.toJSON(t.callState)),void 0!==t.connect&&(e.connect=ut.toJSON(t.connect)),e},create:t=>rt.fromPartial(t??{}),fromPartial(t){const e={callState:void 0,connect:void 0};return e.callState=void 0!==t.callState&&null!==t.callState?at.fromPartial(t.callState):void 0,e.connect=void 0!==t.connect&&null!==t.connect?ut.fromPartial(t.connect):void 0,e}};i.set(rt.$type,rt);const st={$type:"devvit.cli.PlaytestSubscriberMessage",encode:(t,e=r.Writer.create())=>(void 0!==t.appInstalled&&ot.encode(t.appInstalled,e.uint32(10).fork()).ldelim(),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={appInstalled:void 0};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.appInstalled=ot.decode(n,n.uint32());continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({appInstalled:ht(t.appInstalled)?ot.fromJSON(t.appInstalled):void 0}),toJSON(t){const e={};return void 0!==t.appInstalled&&(e.appInstalled=ot.toJSON(t.appInstalled)),e},create:t=>st.fromPartial(t??{}),fromPartial(t){const e={appInstalled:void 0};return e.appInstalled=void 0!==t.appInstalled&&null!==t.appInstalled?ot.fromPartial(t.appInstalled):void 0,e}};i.set(st.$type,st);const ot={$type:"devvit.cli.PlaytestAppInstalled",encode:(t,e=r.Writer.create())=>e,decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={};for(;n.pos<i;){const t=n.uint32();if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({}),toJSON:t=>({}),create:t=>ot.fromPartial(t??{}),fromPartial:t=>({})};i.set(ot.$type,ot);const at={$type:"devvit.cli.PlaytestCallState",encode(t,e=r.Writer.create()){for(const n of t.logs)s.encode(n,e.uint32(10).fork()).ldelim();return e},decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const o={logs:[]};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;o.logs.push(s.decode(n,n.uint32()));continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return o},fromJSON:t=>({logs:globalThis.Array.isArray(t?.logs)?t.logs.map((t=>s.fromJSON(t))):[]}),toJSON(t){const e={};return t.logs?.length&&(e.logs=t.logs.map((t=>s.toJSON(t)))),e},create:t=>at.fromPartial(t??{}),fromPartial(t){const e={logs:[]};return e.logs=t.logs?.map((t=>s.fromPartial(t)))||[],e}};i.set(at.$type,at);const ut={$type:"devvit.cli.PlaytestConnect",encode:(t,e=r.Writer.create())=>(""!==t.url&&e.uint32(10).string(t.url),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={url:""};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.url=n.string();continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({url:ht(t.url)?globalThis.String(t.url):""}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),e},create:t=>ut.fromPartial(t??{}),fromPartial(t){const e={url:""};return e.url=t.url??"",e}};function ht(t){return null!=t}i.set(ut.$type,ut);function ct(){if(!globalThis.location)return;return new URL(location.href).searchParams.get("playtest")??void 0}var lt,ft,dt,pt,vt,_t,mt,gt,bt=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},wt=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};class yt{constructor(){lt.add(this),ft.set(this,{type:"Init"}),vt.set(this,(()=>{"Opened"===bt(this,ft,"f").type&&this.onState?.("Closed"),wt(this,ft,bt(this,lt,"m",pt).call(this),"f")})),_t.set(this,(t=>{switch(!0){case null!=st.fromJSON(JSON.parse(t.data)).appInstalled:this.onState?.("Reloading")}})),mt.set(this,(()=>{if("Opening"!==bt(this,ft,"f").type)throw Error(`invalid transition from ${bt(this,ft,"f").type}`);this.onState?.("Opened"),wt(this,ft,{sock:bt(this,ft,"f").sock,type:"Opened"},"f"),this.send({connect:{url:location.href}})})),gt.set(this,(()=>{wt(this,ft,bt(this,lt,"m",dt).call(this),"f")}))}close(){"timer"in bt(this,ft,"f")&&clearTimeout(bt(this,ft,"f").timer),"sock"in bt(this,ft,"f")&&(bt(this,ft,"f").sock.onopen=null,bt(this,ft,"f").sock.onmessage=null,bt(this,ft,"f").sock.onclose=null,bt(this,ft,"f").sock.close()),wt(this,ft,{type:"Init"},"f")}open(){"Init"===bt(this,ft,"f").type&&wt(this,ft,bt(this,lt,"m",dt).call(this),"f")}send(t){"sock"in bt(this,ft,"f")?bt(this,ft,"f").sock.send(JSON.stringify(t)):console.warn("devvit playtest message dropped",t)}}ft=new WeakMap,vt=new WeakMap,_t=new WeakMap,mt=new WeakMap,gt=new WeakMap,lt=new WeakSet,dt=function(){const t=new WebSocket("ws://localhost:5678");return t.onclose=bt(this,vt,"f"),t.onmessage=bt(this,_t,"f"),t.onopen=bt(this,mt,"f"),{sock:t,type:"Opening"}},pt=function(){return{timer:setTimeout(bt(this,gt,"f"),15e3),type:"Retrying"}};var Et,kt,qt,St,Ct,At,It,Tt,Lt,Rt,xt,Ot,Mt,Pt,jt,Nt,Dt,Ut,Bt,$t=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},Wt=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const zt={debug:o.DEBUG,error:o.ERROR,info:o.INFO,log:o.DEBUG,trace:o.DEBUG,warn:o.WARN};class Vt{constructor(t,e,n){Et.add(this),kt.set(this,void 0),qt.set(this,void 0),St.set(this,!1),Ct.set(this,0),At.set(this,void 0),It.set(this,{}),Tt.set(this,void 0),Lt.set(this,(()=>{})),Rt.set(this,void 0),xt.set(this,void 0),Ot.set(this,ct()),Mt.set(this,!1),Pt.set(this,void 0),jt.set(this,(t=>{const e=t.data,[n]=e;switch(n){case et.READY:{const[,t]=e;$t(this,Pt,t,"f"),Wt(this,Rt,"f")?.plugins?Wt(this,Et,"m",Nt).call(this):Wt(this,Et,"m",Ut).call(this);break}case et.PLUGINS_CONFIGURED:Wt(this,Et,"m",Ut).call(this);break;case et.BUNDLE_LOADED:{const[,t]=e;Wt(this,Et,"m",Dt).call(this,t),$t(this,St,!0,"f"),Wt(this,Tt,"f")?.resolve({metrics:{init:Wt(this,Pt,"f")}}),$t(this,Tt,void 0,"f");break}case et.BUNDLE_LOAD_FAILED:{const[,,t,n]=e;Wt(this,Et,"m",Dt).call(this,n),Wt(this,Tt,"f")?.reject(t),$t(this,Tt,void 0,"f");break}case et.RETURN:{const[,t,n,i]=e;Wt(this,Et,"m",Dt).call(this,i),Wt(this,It,"f")[t]?.resolve(n),delete Wt(this,It,"f")[t];break}case et.ERROR:{const[,t,n,i]=e;Wt(this,Et,"m",Dt).call(this,i),Wt(this,It,"f")[t]?.reject(n),delete Wt(this,It,"f")[t];break}case et.CIRCUIT_BREAKER:{const[,t,n,i]=e;Wt(this,It,"f")[t]?.reject(new J(n,i)),delete Wt(this,It,"f")[t];break}case et.PLUGIN_CALL:{const[,t,n,i,r,s]=e;Wt(this,Rt,"f")?.callback(t,n,i,r,s);break}case et.UNHANDLED_REJECTION:{const[,,t,n]=e;Wt(this,Et,"m",Dt).call(this,n),Wt(this,Lt,"f").call(this,"UnhandledRejection",t);break}}})),Bt.set(this,(t=>{switch(t){case"Opened":console.info("devvit playtest connected");break;case"Closed":console.info("devvit playtest disconnected");break;case"Reloading":{console.info("devvit playtest reloading"),Wt(this,xt,"f")?.close();const t=new URL(location.href);t.searchParams.set("playtest",Wt(this,Ot,"f")??""),location.assign(t),location.reload();break}}})),$t(this,kt,t,"f"),e&&$t(this,Lt,e,"f"),n&&$t(this,Rt,n,"f")}get ready(){return Wt(this,St,"f")}get runtimeDebugLogging(){return Wt(this,Mt,"f")}set runtimeDebugLogging(t){t!==Wt(this,Mt,"f")&&($t(this,Mt,t,"f"),this.runtimeDebugLogging&&Wt(this,qt,"f")?.postMessage([tt.ENABLE_DEBUG_LOGGING]))}async loadBundle(t){if(Wt(this,qt,"f"))throw new Error("Bundle already loaded");const e=function(t){const e=ct();return""===e||e===t}(nt(t));e&&($t(this,xt,new yt,"f"),Wt(this,xt,"f").onState=Wt(this,Bt,"f")),Wt(this,xt,"f")?.open();const n=new Worker(URL.createObjectURL(Wt(this,kt,"f")),{name:`App: ${it(t)}`,type:"module"});return n.onerror=t=>Wt(this,Lt,"f").call(this,"Error",t.error),n.onmessageerror=t=>Wt(this,Lt,"f").call(this,"MessageError",t.data),n.onmessage=Wt(this,jt,"f"),$t(this,qt,n,"f"),$t(this,At,t,"f"),this.runtimeDebugLogging&&Wt(this,qt,"f").postMessage([tt.ENABLE_DEBUG_LOGGING]),e&&Wt(this,qt,"f").postMessage([tt.ENABLE_APP_LOGGING]),new Promise(((t,e)=>{$t(this,Tt,{resolve:t,reject:e},"f")}))}async call(t,e,n){var i;if(!Wt(this,St,"f")||!Wt(this,qt,"f"))throw new Error("No bundle loaded");const r=$t(this,Ct,(i=Wt(this,Ct,"f"),++i),"f"),s=new Promise(((t,e)=>{Wt(this,It,"f")[r]={resolve:t,reject:e}}));return Wt(this,qt,"f").postMessage([tt.CALL,r,t,e,n,!1]),s}onPluginResponse(t,e){Wt(this,qt,"f")?.postMessage([tt.PLUGIN_RESPONSE,t,e])}quit(){Wt(this,xt,"f")?.close(),$t(this,xt,void 0,"f"),$t(this,St,!1,"f"),Wt(this,qt,"f")&&(Wt(this,qt,"f").postMessage([tt.QUIT]),Wt(this,qt,"f").onerror=null,Wt(this,qt,"f").onmessageerror=null,Wt(this,qt,"f").onmessage=null,Wt(this,qt,"f").terminate()),$t(this,qt,void 0,"f");for(const{reject:t}of Object.values(Wt(this,It,"f")))t(Error("worker terminated"));$t(this,It,{},"f"),Wt(this,Tt,"f")?.reject(Error("worker terminated")),$t(this,Tt,void 0,"f")}}kt=new WeakMap,qt=new WeakMap,St=new WeakMap,Ct=new WeakMap,At=new WeakMap,It=new WeakMap,Tt=new WeakMap,Lt=new WeakMap,Rt=new WeakMap,xt=new WeakMap,Ot=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,jt=new WeakMap,Bt=new WeakMap,Et=new WeakSet,Nt=function(){Wt(this,qt,"f")?.postMessage([tt.ENABLE_PLUGINS,Wt(this,Rt,"f")?.plugins??[]])},Dt=function(t){if(!t.length)return;const e=new Date,n={logs:t.map((t=>({severity:zt[t.method],message:t.args.join(" "),tags:[],timestamp:e})))};Wt(this,xt,"f")?.send({callState:n})},Ut=function(){Wt(this,qt,"f")?.postMessage([tt.LOAD_BUNDLE,Wt(this,At,"f")]),$t(this,At,void 0,"f")};var Ft={};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var u,h,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,s),!0;case 6:return c.fn.call(c.context,e,i,r,s,o),!0}for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c.fn.apply(c.context,u)}else{var f,d=c.length;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),l){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c[h].fn.apply(c[h].context,u)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var u=0,h=[],c=a.length;u<c;u++)(a[u].fn!==e||r&&!a[u].once||i&&a[u].context!==i)&&h.push(a[u]);h.length?this._events[s]=1===h.length?h[0]:h:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}({get exports(){return Ft},set exports(t){Ft=t}});var Gt=Ft;class Jt extends Error{constructor(t){super(t),this.name="TimeoutError"}}class Qt extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const Ht=t=>void 0===globalThis.DOMException?new Qt(t):new DOMException(t),Yt=t=>{const e=void 0===t.reason?Ht("This operation was aborted."):t.reason;return e instanceof Error?e:Ht(e)};var Kt,Zt=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class Xt{constructor(){Kt.set(this,[])}enqueue(t,e){const n={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&Zt(this,Kt,"f")[this.size-1].priority>=e.priority)return void Zt(this,Kt,"f").push(n);const i=function(t,e,n){let i=0,r=t.length;for(;r>0;){const s=Math.trunc(r/2);let o=i+s;n(t[o],e)<=0?(i=++o,r-=s+1):r=s}return i}(Zt(this,Kt,"f"),n,((t,e)=>e.priority-t.priority));Zt(this,Kt,"f").splice(i,0,n)}dequeue(){const t=Zt(this,Kt,"f").shift();return null==t?void 0:t.run}filter(t){return Zt(this,Kt,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return Zt(this,Kt,"f").length}}Kt=new WeakMap;var te,ee,ne,ie,re,se,oe,ae,ue,he,ce,le,fe,de,pe,ve,_e,me,ge,be,we,ye,Ee,ke,qe,Se,Ce=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},Ae=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class Ie extends Error{}class Te extends Gt{constructor(t){var e,n,i,r;if(super(),te.add(this),ee.set(this,void 0),ne.set(this,void 0),ie.set(this,0),re.set(this,void 0),se.set(this,void 0),oe.set(this,0),ae.set(this,void 0),ue.set(this,void 0),he.set(this,void 0),ce.set(this,void 0),le.set(this,0),fe.set(this,void 0),de.set(this,void 0),pe.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Xt,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(i=t.interval)||void 0===i?void 0:i.toString())&&void 0!==r?r:""}\` (${typeof t.interval})`);Ce(this,ee,t.carryoverConcurrencyCount,"f"),Ce(this,ne,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),Ce(this,re,t.intervalCap,"f"),Ce(this,se,t.interval,"f"),Ce(this,he,new t.queueClass,"f"),Ce(this,ce,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,Ce(this,pe,!0===t.throwOnTimeout,"f"),Ce(this,de,!1===t.autoStart,"f")}get concurrency(){return Ae(this,fe,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);Ce(this,fe,t,"f"),Ae(this,te,"m",ke).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:Ae(this,pe,"f"),...e},new Promise(((n,i)=>{Ae(this,he,"f").enqueue((async()=>{var r,s,o;Ce(this,le,(s=Ae(this,le,"f"),++s),"f"),Ce(this,ie,(o=Ae(this,ie,"f"),++o),"f");try{if(null===(r=e.signal)||void 0===r?void 0:r.aborted)throw new Ie("The task was aborted.");let i=t({signal:e.signal});e.timeout&&(i=function(t,e,n,i){let r;const s=new Promise(((s,o)=>{if("number"!=typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e!==Number.POSITIVE_INFINITY){if((i={customTimers:{setTimeout,clearTimeout},...i}).signal){const{signal:t}=i;t.aborted&&o(Yt(t)),t.addEventListener("abort",(()=>{o(Yt(t))}))}r=i.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof n){try{s(n())}catch(t){o(t)}return}const i=n instanceof Error?n:new Jt("string"==typeof n?n:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e),(async()=>{try{s(await t)}catch(t){o(t)}finally{i.customTimers.clearTimeout.call(void 0,r)}})()}else s(t)}));return s.clear=()=>{clearTimeout(r),r=void 0},s}(Promise.resolve(i),e.timeout)),e.signal&&(i=Promise.race([i,Ae(this,te,"m",qe).call(this,e.signal)]));const s=await i;n(s),this.emit("completed",s)}catch(t){if(t instanceof Jt&&!e.throwOnTimeout)return void n();i(t),this.emit("error",t)}finally{Ae(this,te,"m",me).call(this)}}),e),this.emit("add"),Ae(this,te,"m",we).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return Ae(this,de,"f")?(Ce(this,de,!1,"f"),Ae(this,te,"m",ke).call(this),this):this}pause(){Ce(this,de,!0,"f")}clear(){Ce(this,he,new(Ae(this,ce,"f")),"f")}async onEmpty(){0!==Ae(this,he,"f").size&&await Ae(this,te,"m",Se).call(this,"empty")}async onSizeLessThan(t){Ae(this,he,"f").size<t||await Ae(this,te,"m",Se).call(this,"next",(()=>Ae(this,he,"f").size<t))}async onIdle(){0===Ae(this,le,"f")&&0===Ae(this,he,"f").size||await Ae(this,te,"m",Se).call(this,"idle")}get size(){return Ae(this,he,"f").size}sizeBy(t){return Ae(this,he,"f").filter(t).length}get pending(){return Ae(this,le,"f")}get isPaused(){return Ae(this,de,"f")}}function Le(){var t,e,n;const i=new URL(globalThis.location?location.href:"file://");if(globalThis.devvit??(globalThis.devvit={}),globalThis.devvit.debug)return;(t=globalThis.devvit).debug??(t.debug={});const r={blocks:void 0,emitSnapshots:void 0,emitState:void 0,realtime:void 0,runtime:void 0,surface:void 0,useAsync:void 0,payments:void 0,bootstrap:void 0},s={};for(const t in r)s[t.toLowerCase()]=t;let o=[...i.searchParams].find((([t])=>"devvitdebug"===t.toLowerCase()))?.[1];if(null!=o){""===o&&(o=Object.keys(r).filter((t=>"emitSnapshots"!==t&&"emitState"!==t)).join());for(const t of o.split(",")??[]){let[i,r]=t.split("=");i&&(i.toLowerCase()in s?i=s[i.toLowerCase()]:console.warn(`[devvit] unknown devvitdebug parameter "${i}"`),(e=globalThis.devvit.debug)[n=i]??(e[n]=r||"true"),console.info(`[devvit] set devvitdebug ${i}=${globalThis.devvit.debug[i]}`))}}}ee=new WeakMap,ne=new WeakMap,ie=new WeakMap,re=new WeakMap,se=new WeakMap,oe=new WeakMap,ae=new WeakMap,ue=new WeakMap,he=new WeakMap,ce=new WeakMap,le=new WeakMap,fe=new WeakMap,de=new WeakMap,pe=new WeakMap,te=new WeakSet,ve=function(){return Ae(this,ne,"f")||Ae(this,ie,"f")<Ae(this,re,"f")},_e=function(){return Ae(this,le,"f")<Ae(this,fe,"f")},me=function(){var t;Ce(this,le,(t=Ae(this,le,"f"),--t),"f"),Ae(this,te,"m",we).call(this),this.emit("next")},ge=function(){Ae(this,te,"m",Ee).call(this),Ae(this,te,"m",ye).call(this),Ce(this,ue,void 0,"f")},be=function(){const t=Date.now();if(void 0===Ae(this,ae,"f")){const e=Ae(this,oe,"f")-t;if(!(e<0))return void 0===Ae(this,ue,"f")&&Ce(this,ue,setTimeout((()=>{Ae(this,te,"m",ge).call(this)}),e),"f"),!0;Ce(this,ie,Ae(this,ee,"f")?Ae(this,le,"f"):0,"f")}return!1},we=function(){if(0===Ae(this,he,"f").size)return Ae(this,ae,"f")&&clearInterval(Ae(this,ae,"f")),Ce(this,ae,void 0,"f"),this.emit("empty"),0===Ae(this,le,"f")&&this.emit("idle"),!1;if(!Ae(this,de,"f")){const t=!Ae(this,te,"a",be);if(Ae(this,te,"a",ve)&&Ae(this,te,"a",_e)){const e=Ae(this,he,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&Ae(this,te,"m",ye).call(this),!0)}}return!1},ye=function(){Ae(this,ne,"f")||void 0!==Ae(this,ae,"f")||(Ce(this,ae,setInterval((()=>{Ae(this,te,"m",Ee).call(this)}),Ae(this,se,"f")),"f"),Ce(this,oe,Date.now()+Ae(this,se,"f"),"f"))},Ee=function(){0===Ae(this,ie,"f")&&0===Ae(this,le,"f")&&Ae(this,ae,"f")&&(clearInterval(Ae(this,ae,"f")),Ce(this,ae,void 0,"f")),Ce(this,ie,Ae(this,ee,"f")?Ae(this,le,"f"):0,"f"),Ae(this,te,"m",ke).call(this)},ke=function(){for(;Ae(this,te,"m",we).call(this););},qe=async function(t){return new Promise(((e,n)=>{t.addEventListener("abort",(()=>{n(new Ie("The task was aborted."))}),{once:!0})}))},Se=async function(t,e){return new Promise((n=>{const i=()=>{e&&!e()||(this.off(t,i),n())};this.on(t,i)}))};var Re,xe,Oe,Me,Pe,je,Ne,De,Ue,Be,$e,We,ze,Ve,Fe,Ge,Je=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},Qe=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};const He={width:288,height:320,scale:1,fontScale:1},Ye=["showToast","showForm","navigateToUrl"];Le();class Ke{constructor(){Re.add(this),xe.set(this,void 0),this.dimensions=He,Oe.set(this,void 0),Me.set(this,{}),Pe.set(this,new Te({concurrency:1})),je.set(this,!1),Ne.set(this,void 0),De.set(this,!1),Ue.set(this,!1),Be.set(this,[]),Ve.set(this,((t,e,n,i,r)=>{this.onPluginCall?.(t,e,n,i,r),e===a.fullName&&n===a.methods.send.name&&this._local?.onPluginResponse(t,{error:void 0,success:!0,value:{}})}))}get appState(){return Je(this,Me,"f").__postData={thingId:this.postID,config:this.postConfig},Je(this,Me,"f")}async load(t){this.unload(),Qe(this,Oe,t,"f");try{return await(this._local?.loadBundle(t))}catch(e){Je(this,Re,"m",ze).call(this,t,"Error",e)}}set meta(t){const e={...t},n=[];for(const[t,e]of Object.entries(devvit?.debug??{}))n.push(`${t}=${e}`);n.length&&(e[b.Debug]={values:n}),Qe(this,xe,e,"f")}queueEvent(t){const e=Je(this,Oe,"f");t.async?Je(this,Re,"m",Fe).call(this,e,t):Je(this,Pe,"f").add((()=>Je(this,Re,"m",Fe).call(this,e,t)))}queueRenderPost(t,e,n){const i=Je(this,Oe,"f");Je(this,Pe,"f").add((()=>Je(this,Re,"m",Ge).call(this,i,t,e,n)))}get rendered(){return Je(this,je,"f")}get pausedEffects(){return Je(this,Be,"f")}resetAppState(){Qe(this,je,!1,"f"),Qe(this,Me,{},"f")}set runtimeDebugLogging(t){Qe(this,De,t,"f"),this._local&&(this._local.runtimeDebugLogging=t)}setLocalSrc(t){this.unload(),this._local=t?new Vt(t,((t,e)=>this.onError?.(t,e)),{callback:Je(this,Ve,"f"),plugins:[]}):void 0,this._local&&(this._local.runtimeDebugLogging=Je(this,De,"f"))}unload(){Qe(this,Oe,void 0,"f"),null!=Je(this,Ne,"f")&&clearTimeout(Je(this,Ne,"f")),Je(this,Pe,"f").clear(),this._local?.quit()}togglePause(t){if(!t&&Je(this,Be,"f").length>0){const t=Je(this,Be,"f");Qe(this,Be,[],"f"),t.forEach((({renderType:t,effects:e})=>{Je(this,Re,"m",We).call(this,t,e)}))}Qe(this,Ue,t,"f")}}function Ze(t,e,n,i){const r=i.match(/([a-zA-Z0-9-]+)\/(.*)/)??[];if(r.length<3)return"";const[s,o,a]=r;if(!e||!o||!a)return"";const u=e.replace(/^t[0-9]_/,""),h=t.replace("{{location}}",u).replace("{{app}}",o).replace("{{path}}",a);return new URL(h).toString()}xe=new WeakMap,Oe=new WeakMap,Me=new WeakMap,Pe=new WeakMap,je=new WeakMap,Ne=new WeakMap,De=new WeakMap,Ue=new WeakMap,Be=new WeakMap,Ve=new WeakMap,Re=new WeakSet,$e=function(t){devvit?.debug.runtime&&(Q(t)?console.debug("[runtime] try remote call; circuit break"):console.debug("[runtime] try remote call; local failed",t),this.remote||console.debug("[runtime] call failed; no remote"))},We=function(t,e){for(const n of e)n.rerenderUi?(null!=Je(this,Ne,"f")&&clearTimeout(Je(this,Ne,"f")),Qe(this,Ne,setTimeout((()=>{this.queueRenderPost(u.RENDER_EFFECT_EVENT,"rerender-effect",{})}),1e3*(n.rerenderUi.delaySeconds??0)),"f")):(t!==u.RENDER_USER_ACTION||Ye.some((t=>n[t])))&&this.onUserAction?.(n)},ze=function(t,e,n){t&&Je(this,Oe,"f")!==t||this.onError?.(e,n)},Fe=async function(t,e){let n;const i={event:e,state:this.appState};if(this._local?.ready&&e.scope!==h.REMOTE)try{n=await this._local.call("HandleUIEvent",i,Je(this,xe,"f"))}catch(e){Q(e)&&this.remote||Je(this,Re,"m",ze).call(this,t,"Error",e),Je(this,Re,"m",$e).call(this,e)}else devvit?.debug.runtime&&console.debug("[runtime] try remote call; "+(e.scope===h.REMOTE?"local call forbidden":"local not ready"));if(!n&&e.scope!==h.LOCAL)try{n=await(this.remote?.HandleUIEvent(i,Je(this,xe,"f")))}catch(e){Je(this,Re,"m",ze).call(this,t,"Error",e),devvit?.debug.runtime&&console.debug("[runtime] remote call failed",e)}if(n){e.async||Qe(this,Me,n.state??{},"f");const t=e.realtimeEvent?u.RENDER_EFFECT_EVENT:u.RENDER_USER_ACTION;Je(this,Ue,"f")?Je(this,Be,"f").push({renderType:t,effects:n.effects}):Je(this,Re,"m",We).call(this,t,n.effects)}devvit?.debug.runtime&&(this._local?.ready||this.remote?this._local?.ready||e.scope!==h.LOCAL?this.remote||e.scope!==h.REMOTE||console.debug("[runtime] call failed; remote event but remote runtime is unavailable"):console.debug("[runtime] call failed; local event but local runtime is unavailable"):console.debug("[runtime] call failed; no runtimes"))},Ge=async function(t,e,n,i){const r={blocks:{type:e,id:n,data:i},state:this.appState,dimensions:this.dimensions};let s;if(this._local?.ready)try{s=await this._local.call("RenderPost",r,Je(this,xe,"f"))}catch(e){Q(e)&&e.response&&(s=e.response),Q(e)&&this.remote||Je(this,Re,"m",ze).call(this,t,"Error",e),Je(this,Re,"m",$e).call(this,e)}else devvit?.debug.runtime&&console.debug("[runtime] try remote call; local not ready");if(!s)try{s=await(this.remote?.RenderPost(r,Je(this,xe,"f")))}catch(e){Je(this,Re,"m",ze).call(this,t,"Error",e),devvit?.debug.runtime&&console.debug("[runtime] remote call failed",e)}s&&(Qe(this,je,!0,"f"),s.state&&Qe(this,Me,s.state,"f"),this.onRenderPost?.(r,s),Je(this,Ue,"f")?Je(this,Be,"f").push({renderType:r.blocks.type,effects:s.effects}):Je(this,Re,"m",We).call(this,r.blocks.type,s.effects)),!devvit?.debug.runtime||this._local?.ready||this.remote||console.debug("[runtime] call failed; no runtimes")};var Xe,tn,en,nn,rn,sn,on,an,un,hn,cn,ln,fn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},dn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},pn=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},vn=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};let _n=class extends t{static get styles(){return[c]}constructor(){super(),Xe.add(this),this.runtimeDebugLogging=!1,this.useExperimentalBlocks=!1,this.webviewUrlTemplate="",this.disableAssetSandbox=!1,tn.set(this,new Ke),en.set(this,void 0),nn.set(this,void 0),rn.set(this,void 0),sn.set(this,""),an.set(this,(()=>({experimental:this.useExperimentalBlocks,resolveWebviewUrl:t=>this.disableAssetSandbox?t:Ze(this.webviewUrlTemplate,this.metadata?.[b.Subreddit]?.values?.[0],pn(this,sn,"f"),t),onAction:t=>pn(this,tn,"f").queueRenderPost(u.RENDER_USER_ACTION,t.id,t.data??{}),stackDirection:l.UNRECOGNIZED,disableAssetSandbox:this.disableAssetSandbox}))),un.set(this,((t,e)=>{Q(e)||console.error(e),pn(this,Xe,"m",on).call(this,"devvit-ui-error",{err:e,type:t})})),hn.set(this,((t,e,n,i,r)=>{e===a.fullName&&n===a.methods.send.name&&((devvit?.debug.surface||devvit?.debug.realtime)&&console.debug("[realtime][custom] realtime plugin call",i),pn(this,Xe,"m",on).call(this,"devvit-realtime-send",{event:i}))})),cn.set(this,((t,e)=>{var n,i;this.renderResponse=e,this.renderResponse?.blocks?.ui&&(this._rootBlock=this.renderResponse.blocks.ui,pn(this,en,"f")?((n=this._rootBlock).config??(n.config={}),(i=this._rootBlock.config).rootConfig??(i.rootConfig=f.fromPartial({})),this._rootBlock.config.rootConfig.height=pn(this,en,"f")):vn(this,en,this._rootBlock.config?.rootConfig?.height||z,"f"))})),ln.set(this,(t=>{devvit?.debug.surface&&console.debug("[custom] effect",t),pn(this,Xe,"m",on).call(this,"devvit-ui-effect",{effect:t,onEvent:t=>pn(this,tn,"f").queueEvent(t),metadata:this.metadata})})),devvit?.debug.surface&&console.debug("[custom] constructed"),pn(this,tn,"f").onError=pn(this,un,"f"),pn(this,tn,"f").onPluginCall=pn(this,hn,"f"),pn(this,tn,"f").onRenderPost=pn(this,cn,"f"),pn(this,tn,"f").onUserAction=pn(this,ln,"f")}async connectedCallback(){super.connectedCallback(),devvit?.debug.surface&&console.debug("[custom] connected"),vn(this,nn,new ResizeObserver(H((t=>{0!==t.length&&(this.dimensions=X(t[0],window,document.body),devvit?.debug.surface&&console.debug("[custom] resized",this.dimensions))}),600)),"f"),pn(this,nn,"f").observe(this,{box:"content-box"}),vn(this,rn,new IntersectionObserver((t=>{t.forEach((t=>{devvit?.debug.surface&&console.debug(`[custom] ${t.isIntersecting?"":"not "}intersecting`),pn(this,tn,"f").togglePause(!t.isIntersecting)}))})),"f"),pn(this,rn,"f").observe(this)}disconnectedCallback(){devvit?.debug.surface&&console.debug("[custom] disconnected"),pn(this,tn,"f").unload(),pn(this,nn,"f")?.unobserve(this),pn(this,rn,"f")?.unobserve(this),super.disconnectedCallback()}render(){return this.renderResponse?e`<div class="relative"> <devvit-blocks-renderer class="${this.scheme??""}" .block="${this._rootBlock}" .renderContext="${pn(this,an,"f")}"> <slot slot="empty-state-image" name="empty-state-image"></slot> </devvit-blocks-renderer> </div>`:e`<slot></slot>`}async willUpdate(t){if(pn(this,tn,"f").meta=this.metadata,pn(this,tn,"f").postConfig=this.postConfig,this.dimensions&&(pn(this,tn,"f").dimensions=this.dimensions),t.has("postId")&&(pn(this,tn,"f").postID=this.postId?Z(this.postId):void 0),t.has("runtimeDebugLogging")&&(pn(this,tn,"f").runtimeDebugLogging=this.runtimeDebugLogging),t.has("remoteApp")&&(devvit?.debug.surface&&console.debug("[custom] remoteApp "+(this.remoteApp?"defined":"undefined")),pn(this,tn,"f").remote=this.remoteApp),t.has("localRuntimeCode")&&(devvit?.debug.surface&&console.debug("[custom] local runtime "+(this.localRuntimeCode?"loading":"unloading")),pn(this,tn,"f").setLocalSrc(this.localRuntimeCode)),t.has("bundle")&&this.bundle){devvit?.debug.surface&&console.debug("[custom] bundle loading");const e=await pn(this,tn,"f").load(this.bundle);e&&pn(this,Xe,"m",on).call(this,"devvit-loaded",e),devvit?.debug.surface&&console.debug("[custom] bundle loaded"),vn(this,sn,this.bundle.actor?.version??"","f"),t.get("bundle")&&((devvit?.debug.surface||devvit?.debug.runtime)&&console.debug("[runtime][custom] reset runtime state"),this.renderResponse=void 0,pn(this,tn,"f").resetAppState(),vn(this,en,void 0,"f"))}this.dimensions&&(pn(this,tn,"f").rendered?(t.has("dimensions")||t.has("bundle"))&&(devvit?.debug.surface&&console.debug("[custom] dimensions / bundle render"),pn(this,tn,"f").queueRenderPost(u.RENDER_USER_ACTION,void 0,{})):(devvit?.debug.surface&&console.debug("[custom] initial render"),pn(this,tn,"f").queueRenderPost(u.RENDER_INITIAL,void 0,{})))}};var mn,gn;tn=new WeakMap,en=new WeakMap,nn=new WeakMap,rn=new WeakMap,sn=new WeakMap,an=new WeakMap,un=new WeakMap,hn=new WeakMap,cn=new WeakMap,ln=new WeakMap,Xe=new WeakSet,on=function(t,e){this.dispatchEvent(L(t,e))},fn([C({attribute:!1}),dn("design:type",Object)],_n.prototype,"remoteApp",void 0),fn([C({attribute:!1}),dn("design:type",Object)],_n.prototype,"bundle",void 0),fn([C({attribute:!1}),dn("design:type",Object)],_n.prototype,"localRuntimeCode",void 0),fn([C({attribute:!1}),dn("design:type",Object)],_n.prototype,"metadata",void 0),fn([C({attribute:!1}),dn("design:type",Object)],_n.prototype,"postConfig",void 0),fn([C({attribute:"post-id"}),dn("design:type",Object)],_n.prototype,"postId",void 0),fn([C({attribute:"runtime-debug-logging",type:Boolean}),dn("design:type",Boolean)],_n.prototype,"runtimeDebugLogging",void 0),fn([C({attribute:"scheme"}),dn("design:type",Object)],_n.prototype,"scheme",void 0),fn([C({attribute:"use-experimental-blocks",type:Boolean}),dn("design:type",Boolean)],_n.prototype,"useExperimentalBlocks",void 0),fn([C({type:String}),dn("design:type",String)],_n.prototype,"webviewUrlTemplate",void 0),fn([C({attribute:"disable-asset-sandbox",type:Boolean}),dn("design:type",Boolean)],_n.prototype,"disableAssetSandbox",void 0),fn([A(),dn("design:type",Object)],_n.prototype,"renderResponse",void 0),fn([A(),dn("design:type",Object)],_n.prototype,"dimensions",void 0),fn([I("devvit-blocks-renderer"),dn("design:type",W)],_n.prototype,"_blocksRenderer",void 0),fn([A(),dn("design:type",Object)],_n.prototype,"_rootBlock",void 0),_n=fn([T("devvit-custom-post"),dn("design:paramtypes",[])],_n),void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,i=arguments[1],r=i>>0,s=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],a=void 0===o?n:o>>0,u=a<0?Math.max(n+a,0):Math.min(a,n);s<u;)e[s]=t,s++;return e}}),[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array].forEach((function(t){void 0===t.prototype.fill&&Object.defineProperty(t.prototype,"fill",{value:Array.prototype.fill})})),void 0===Math.clz32&&(Math.clz32=(mn=Math.log,gn=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(mn(e)/gn|0)|0})),void 0===Math.imul&&(Math.imul=function(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0});var bn,wn,yn,En,kn,qn,Sn,Cn,An,In,Tn,Ln,Rn,xn,On,Mn,Pn,jn,Nn,Dn,Un,Bn,$n,Wn,zn,Vn,Fn,Gn,Jn,Qn=Math.clz32,Hn=ArrayBuffer.isView,Yn=Math.imul;function Kn(){}function Zn(){}function Xn(){}function ti(){this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function ei(t){return function(t){if(t.t())return[];var e=t.q(),n=_r(Array(e),null),i=t.l(),r=0;for(;i.m();){var s=r;r=s+1|0,n[s]=i.o()}return n}(t)}function ni(t){return 0===(e=[t]).length?_i():gi(new ko(e,!0));var e}function ii(t){return void 0!==t.toArray?t.toArray():ei(t)}function ri(t,e,n,i,r){$n.h(i,r,t.length);var s=r-i|0;if($n.h(n,n+s|0,e.length),Hn(e)&&Hn(t)){var o=t.subarray(i,r);e.set(o,n)}else if(t!==e||n<=i){var a=0;if(a<s)do{var u=a;a=a+1|0,e[n+u|0]=t[i+u|0]}while(a<s)}else{var h=s-1|0;if(0<=h)do{var c=h;h=h+-1|0,e[n+c|0]=t[i+c|0]}while(0<=h)}}function si(t){return t<0&&function(){throw Hs("Index overflow has happened.")}(),t}function oi(){io.call(this)}function ai(t){this.w_1=t,this.u_1=0,this.v_1=-1}function ui(){oi.call(this),this.y_1=0}function hi(){ao.call(this),this.g1_1=null,this.h1_1=null}function ci(){oi.call(this)}function li(t){if(!(t>=0)){throw xs(xr("capacity must be non-negative."))}return _r(Array(t),null)}function fi(t,e){t[e]=null}function di(t,e,n){t.fill(null,e,n)}function pi(t,e){return function(t,e){if(!(e>=0)){throw xs(xr("Invalid new array size: "+e+"."))}return function(t,e,n){var i=t.slice(0,e);void 0!==t.$type$&&(i.$type$=t.$type$);var r=t.length;if(e>r)for(i.length=e;r<e;){var s=r;r=s+1|0,i[s]=n}return i}(t,e,null)}(t,e)}function vi(){yn=this;var t=mi(0);t.w1_1=!0,this.x1_1=t}function _i(){return t=Ur(Nr(wi)),wi.call(t,[]),t;var t}function mi(t){return function(t,e){if(wi.call(e,[]),!(t>=0))throw xs(xr("Negative initial capacity: "+t));return e}(t,Ur(Nr(wi)))}function gi(t){return function(t,e){var n=ii(t);return wi.call(e,n),e}(t,Ur(Nr(wi)))}function bi(t,e){return $n.y1(e,t.q()),e}function wi(t){null==yn&&new vi,ui.call(this),this.v1_1=t,this.w1_1=!1}function yi(t){return function(t,e){hi.call(e),Ei.call(e),e.f2_1=t}(Ii(),t),t}function Ei(){this.g2_1=null}function ki(t){qi.call(this,t)}function qi(t){ci.call(this),this.j2_1=t}function Si(t,e){return function(t){var e;e=0===t?0:1<<(31-Qn(t)|0);return e}(Yn(er(e,1),3))}function Ci(t,e){return Qn(e)+1|0}function Ai(t){return function(t,e){Wi.call(e,li(t),null,new Int32Array(t),new Int32Array(Si(0,t)),2,0)}(8,t),t}function Ii(){return Ai(Ur(Nr(Wi)))}function Ti(t){return t.p2_1.length}function Li(t){return t.s2_1.length}function Ri(t){t.w2_1=t.w2_1+1|0}function xi(t,e){!function(t,e){var n=Ti(t)-t.u2_1|0,i=t.u2_1-t.q()|0;return n<e&&(i+n|0)>=e&&i>=(Ti(t)/4|0)}(t,e)?function(t,e){if(e<0)throw Ws("too many elements");if(e>Ti(t)){var n=$n.z2(Ti(t),e);t.p2_1=pi(t.p2_1,n);var i=t,r=t.q2_1;i.q2_1=null==r?null:pi(r,n),t.r2_1=function(t,e){if(!(e>=0)){throw xs(xr("Invalid new array size: "+e+"."))}return function(t,e){var n=t.length,i=e.length,r=0,s=e;for(;r<n&&r<i;){var o=r,a=r;r=a+1|0,s[o]=t[a]}return e}(t,new Int32Array(e))}(t.r2_1,n);var s=Si(0,n);s>Li(t)&&Mi(t,s)}}(t,t.u2_1+e|0):Mi(t,Li(t))}function Oi(t,e){return null==e?0:Yn(Or(e),-1640531527)>>>t.v2_1|0}function Mi(t,e){var n,i,r,s;Ri(t),t.u2_1>t.x2_1&&function(t){for(var e=0,n=0,i=t.q2_1;e<t.u2_1;)t.r2_1[e]>=0&&(t.p2_1[n]=t.p2_1[e],null!=i&&(i[n]=i[e]),n=n+1|0),e=e+1|0;di(t.p2_1,n,t.u2_1),null==i||di(i,n,t.u2_1),t.u2_1=n}(t),e!==Li(t)?(t.s2_1=new Int32Array(e),t.v2_1=Ci(0,e)):(n=t.s2_1,i=0,r=0,s=Li(t),r=r===Bn?0:r,s=s===Bn?n.length:s,$n.h(r,s,n.length),n.fill(i,r,s));for(var o=0;o<t.u2_1;){var a=o;if(o=a+1|0,!Pi(t,a))throw js("This cannot happen with fixed magic multiplier and grow-only hash array. Have object hashCodes changed?")}}function Pi(t,e){for(var n=Oi(t,t.p2_1[e]),i=t.t2_1;;){if(0===t.s2_1[n])return t.s2_1[n]=e+1|0,t.r2_1[e]=n,!0;if((i=i-1|0)<0)return!1;var r=n;n=r-1|0,0===r&&(n=Li(t)-1|0)}}function ji(t,e){for(var n=Oi(t,e),i=t.t2_1;;){var r=t.s2_1[n];if(0===r)return-1;if(r>0&&Pr(t.p2_1[r-1|0],e))return r-1|0;if((i=i-1|0)<0)return-1;var s=n;n=s-1|0,0===s&&(n=Li(t)-1|0)}}function Ni(t,e){fi(t.p2_1,e),function(t,e){var n=e,i=e,r=0,s=nr(Yn(t.t2_1,2),Li(t)/2|0);for(;;){var o=n;if(n=o-1|0,0===o&&(n=Li(t)-1|0),(r=r+1|0)>t.t2_1)return t.s2_1[i]=0,bn;var a=t.s2_1[n];if(0===a)return t.s2_1[i]=0,bn;if(a<0)t.s2_1[i]=-1,i=n,r=0;else((Oi(t,t.p2_1[a-1|0])-n|0)&(Li(t)-1|0))>=r&&(t.s2_1[i]=a,t.r2_1[a-1|0]=i,i=n,r=0);if((s=s-1|0)<0)return t.s2_1[i]=-1,bn}}(t,t.r2_1[e]),t.r2_1[e]=-1,t.x2_1=t.x2_1-1|0,Ri(t)}function Di(){this.a3_1=-1640531527,this.b3_1=8,this.c3_1=2,this.d3_1=-1}function Ui(t){this.e3_1=t,this.f3_1=0,this.g3_1=-1,this.h3_1=this.e3_1.w2_1,this.i3()}function Bi(t){Ui.call(this,t)}function $i(t,e){this.u3_1=t,this.v3_1=e}function Wi(t,e,n,i,r,s){this.p2_1=t,this.q2_1=e,this.r2_1=n,this.s2_1=i,this.t2_1=r,this.u2_1=s,this.v2_1=Ci(0,Li(this)),this.w2_1=0,this.x2_1=0,this.y2_1=!1}function zi(){}function Vi(){return yi(t=Ur(Nr(Fi))),Fi.call(t),t;var t}function Fi(){}function Gi(t){return Qi.call(t,""),t}function Ji(){return Gi(Ur(Nr(Qi)))}function Qi(t){this.q3_1=void 0!==t?t:""}function Hi(t){var e=ir(t).toUpperCase();return e.length>1?t:qr(e,0)}function Yi(t,e,n,i,r,s){return Do(t,e,n,i,r,s=s!==Bn&&s)}function Ki(t){switch(t.length){case 0:return bo();case 1:return ni(t[0]);default:return function(t){return gi(function(t){return new ko(t,!1)}(t))}(t)}}function Zi(t){return t.length-1|0}function Xi(t,e){if(null==e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;if(n=n+1|0,null==t[r])return r}while(n<=i)}else{var s=0,o=t.length-1|0;if(s<=o)do{var a=s;if(s=s+1|0,Pr(e,t[a]))return a}while(s<=o)}return-1}function tr(t,e,n,i,r,s,o){return e=e===Bn?", ":e,n=n===Bn?"":n,i=i===Bn?"":i,r=r===Bn?-1:r,s=s===Bn?"...":s,o=o===Bn?null:o,function(t,e,n,i,r,s,o,a){n=n===Bn?", ":n,i=i===Bn?"":i,r=r===Bn?"":r,s=s===Bn?-1:s,o=o===Bn?"...":o,a=a===Bn?null:a,e.d4(i);var u=0,h=t.l();t:for(;h.m();){var c=h.o();if((u=u+1|0)>1&&e.d4(n),!(s<0||u<=s))break t;Oo(e,c,a)}s>=0&&u>s&&e.d4(o);return e.d4(r),e}(t,Ji(),e,n,i,r,s,o).toString()}function er(t,e){return t<e?e:t}function nr(t,e){return t>e?e:t}function ir(t){return String.fromCharCode(t)}function rr(){En=this,this.f4_1=0,this.g4_1=65535,this.h4_1=55296,this.i4_1=56319,this.j4_1=56320,this.k4_1=57343,this.l4_1=55296,this.m4_1=57343,this.n4_1=2,this.o4_1=16}function sr(){return null==En&&new rr,En}function or(){}function ar(){}function ur(){}function hr(){}function cr(){}function lr(){}function fr(t,e){this.p4_1=t,this.q4_1=e}function dr(t){var e=null==t?null:xr(t);return null==e?"null":e}function pr(t){for(var e=1,n=[],i=0,r=t.length;i<r;){var s=t[i];i=i+1|0;var o=e,a=s.prototype.$imask$,u=null==a?s.$imask$:a;null!=u&&(n.push(u),o=u.length);var h=s.$metadata$.iid,c=null==h?null:vr(h);null!=c&&(n.push(c),o=Math.max(o,c.length)),o>e&&(e=o)}return function(t,e){var n=0,i=new Int32Array(t);for(;n<t;){for(var r=n,s=0,o=0,a=e.length;o<a;){var u=e[o];o=o+1|0,r<u.length&&(s|=u[r])}i[r]=s,n=n+1|0}return i}(e,n)}function vr(t){var e=t>>5,n=new Int32Array(e+1|0),i=1<<(31&t);return n[e]=n[e]|i,n}function _r(t,e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0,t[r]=e}while(r!==i);return t}function mr(t){this.w4_1=t,this.v4_1=0}function gr(){return kr(),kn}function br(){return kr(),qn}function wr(){return kr(),Sn}function yr(){return kr(),Cn}function Er(t){return kr(),(0|t)===t?ys(t):(br()[0]=t,Yn(wr()[(kr(),An)],31)+wr()[yr()]|0)}function kr(){In||(In=!0,kn=new ArrayBuffer(8),qn=new Float64Array(gr()),new Float32Array(gr()),Sn=new Int32Array(gr()),br()[0]=-1,Cn=0!==wr()[0]?1:0,An=1-yr()|0)}function qr(t,e){var n;if(Sr(t)){var i,r=t.charCodeAt(e);sr();if(r<0)i=!0;else{sr();i=r>65535}if(i)throw xs("Invalid Char code: "+r);n=function(t){return function(t){return 65535&t}(function(t){return t<<16>>16}(ys(t)))}(r)}else n=t.b(e);return n}function Sr(t){return"string"==typeof t}function Cr(t){return Sr(t)?t.length:t.a()}function Ar(t){return xr(t)}function Ir(t,e){var n;if(t<e)n=-1;else if(t>e)n=1;else if(t===e){var i;if(0!==t)i=0;else{var r=1/t;i=r===1/e?0:r<0?-1:1}n=i}else n=t!=t?e!=e?0:1:-1;return n}function Tr(t,e){return t<e?-1:t>e?1:0}function Lr(t){if(!("kotlinHashCodeValue$"in t)){var e=Rr(),n=new Object;n.value=e,n.enumerable=!1,Object.defineProperty(t,"kotlinHashCodeValue$",n)}return t.kotlinHashCodeValue$}function Rr(){return 4294967296*Math.random()|0}function xr(t){return null==t?"null":function(t){return!!Es(t)||Hn(t)}(t)?"[...]":"function"!=typeof t.toString?function(t){return Object.prototype.toString.call(t)}(t):t.toString()}function Or(t){if(null==t)return 0;var e,n=typeof t;switch(n){case"object":e="function"==typeof t.hashCode?t.hashCode():Lr(t);break;case"function":e=Lr(t);break;case"number":e=Er(t);break;case"boolean":e=t?1231:1237;break;case"string":e=Mr(String(t));break;case"bigint":e=function(t){var e=BigInt(32),n=BigInt(4294967295),i=t<0?-t:t,r=0,s=t<0?-1:1;for(;0!=i;){var o=Number(i&n);r=Yn(31,r)+o|0,i>>=e}return Yn(r,s)}(t);break;case"symbol":e=function(t){var e=(i=t,Symbol.keyFor(i)!=Bn?function(){Tn===Bn&&(Tn=new Map);return Tn}():function(){Ln===Bn&&(Ln=new WeakMap);return Ln}()),n=e.get(t);var i;if(n!==Bn)return n;var r=Rr();return e.set(t,r),r}(t);break;default:e=function(){throw new Error("Unexpected typeof `"+n+"`")}()}return e}function Mr(t){var e=0,n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0;var s=t.charCodeAt(r);e=Yn(e,31)+s|0}while(r!==i);return e}function Pr(t,e){if(null==t)return null==e;if(null==e)return!1;if("object"==typeof t&&"function"==typeof t.equals)return t.equals(e);if(t!=t)return e!=e;if("number"==typeof t&&"number"==typeof e){var n;if(t===e){var i;if(0!==t)i=!0;else i=1/t===1/e;n=i}else n=!1;return n}return t===e}function jr(t,e){null!=Error.captureStackTrace?Error.captureStackTrace(t,e):t.stack=(new Error).stack}function Nr(t){return t.prototype}function Dr(t,e,n,i){return Object.defineProperty(t,e,{configurable:!0,get:n,set:i})}function Ur(t){return Object.create(t)}function Br(t,e,n){Error.call(t),function(t,e,n){var i=Ss(Object.getPrototypeOf(t));if(0==(1&i)){var r;if(null==e){var s;if(null!==e){var o=null==n?null:n.toString();s=null==o?Bn:o}else s=Bn;r=s}else r=e;t.message=r}0==(2&i)&&(t.cause=n);t.name=Object.getPrototypeOf(t).constructor.name}(t,e,n)}function $r(t){var e;return null==t?function(){throw Ks()}():e=t,e}function Wr(){throw Xs()}function zr(t){throw eo("lateinit property "+t+" has not been initialized")}function Vr(t){throw xs(t)}function Fr(){Rn=this,this.a5_1=new Gr(0,-2147483648),this.b5_1=new Gr(-1,2147483647),this.c5_1=8,this.d5_1=64}function Gr(t,e){null==Rn&&new Fr,Zn.call(this),this.x4_1=t,this.y4_1=e}function Jr(){return ps(),xn}function Qr(){return ps(),On}function Hr(){return ps(),Mn}function Yr(){return ps(),jn}function Kr(){return ps(),Nn}function Zr(t,e){if(ps(),is(t,e))return 0;var n=os(t),i=os(e);return n&&!i?-1:!n&&i?1:os(ts(t,e))?-1:1}function Xr(t,e){ps();var n=t.y4_1>>>16|0,i=65535&t.y4_1,r=t.x4_1>>>16|0,s=65535&t.x4_1,o=e.y4_1>>>16|0,a=65535&e.y4_1,u=e.x4_1>>>16|0,h=0,c=0,l=0,f=0;return h=(h=h+((c=(c=c+((l=(l=l+((f=f+(s+(65535&e.x4_1)|0)|0)>>>16|0)|0)+(r+u|0)|0)>>>16|0)|0)+(i+a|0)|0)>>>16|0)|0)+(n+o|0)|0,new Gr((l&=65535)<<16|(f&=65535),(h&=65535)<<16|(c&=65535))}function ts(t,e){return ps(),Xr(t,e.i5())}function es(t,e){if(ps(),as(t))return Jr();if(as(e))return Jr();if(is(t,Yr()))return us(e)?Yr():Jr();if(is(e,Yr()))return us(t)?Yr():Jr();if(os(t))return os(e)?es(hs(t),hs(e)):hs(es(hs(t),e));if(os(e))return hs(es(t,hs(e)));if(cs(t,Kr())&&cs(e,Kr()))return ls(ns(t)*ns(e));var n=t.y4_1>>>16|0,i=65535&t.y4_1,r=t.x4_1>>>16|0,s=65535&t.x4_1,o=e.y4_1>>>16|0,a=65535&e.y4_1,u=e.x4_1>>>16|0,h=65535&e.x4_1,c=0,l=0,f=0,d=0;return f=f+((d=d+Yn(s,h)|0)>>>16|0)|0,d&=65535,l=(l=l+((f=f+Yn(r,h)|0)>>>16|0)|0)+((f=(f&=65535)+Yn(s,u)|0)>>>16|0)|0,f&=65535,c=(c=(c=c+((l=l+Yn(i,h)|0)>>>16|0)|0)+((l=(l&=65535)+Yn(r,u)|0)>>>16|0)|0)+((l=(l&=65535)+Yn(s,a)|0)>>>16|0)|0,l&=65535,c=c+(((Yn(n,h)+Yn(i,u)|0)+Yn(r,a)|0)+Yn(s,o)|0)|0,new Gr(f<<16|d,(c&=65535)<<16|l)}function ns(t){return ps(),4294967296*t.y4_1+function(t){return ps(),t.x4_1>=0?t.x4_1:4294967296+t.x4_1}(t)}function is(t,e){return ps(),t.y4_1===e.y4_1&&t.x4_1===e.x4_1}function rs(t,e){if(ps(),e<2||36<e)throw Ls("radix out of range: "+e);if(as(t))return"0";if(os(t)){if(is(t,Yr())){var n=ss(e),i=t.h5(n),r=ts(es(i,n),t).k5();return rs(i,e)+r.toString(e)}return"-"+rs(hs(t),e)}for(var s=2===e?31:e<=10?9:e<=21?7:e<=35?6:5,o=ls(Math.pow(e,s)),a=t,u="";;){var h=a.h5(o),c=ts(a,es(h,o)).k5().toString(e);if(as(a=h))return c+u;for(;c.length<s;)c="0"+c;u=c+u}}function ss(t){return ps(),new Gr(t,t<0?-1:0)}function os(t){return ps(),t.y4_1<0}function as(t){return ps(),0===t.y4_1&&0===t.x4_1}function us(t){return ps(),1==(1&t.x4_1)}function hs(t){return ps(),t.i5()}function cs(t,e){return ps(),Zr(t,e)<0}function ls(t){if(ps(),(e=t)!=e)return Jr();if(t<=-0x8000000000000000)return Yr();if(t+1>=0x8000000000000000)return ps(),Pn;if(t<0)return hs(ls(-t));var e,n=4294967296;return new Gr(t%n|0,t/n|0)}function fs(t,e){return ps(),Zr(t,e)>0}function ds(t,e){return ps(),Zr(t,e)>=0}function ps(){Dn||(Dn=!0,xn=ss(0),On=ss(1),Mn=ss(-1),Pn=new Gr(-1,2147483647),jn=new Gr(0,-2147483648),Nn=ss(16777216))}function vs(t,e,n,i,r){return _s("class",t,e,n,i,r,null)}function _s(t,e,n,i,r,s,o){return{kind:t,simpleName:e,associatedObjectKey:i,associatedObjects:r,suspendArity:s,$kClass$:undefined,defaultConstructor:n,iid:o}}function ms(t,e,n,i,r,s,o,a,u){null!=i&&(t.prototype=Object.create(i.prototype),t.prototype.constructor=t);var h=n(e,s,o,a,null==u?[]:u);(t.$metadata$=h,null!=r)&&((null!=h.iid?t:t.prototype).$imask$=pr(r))}function gs(t,e,n,i,r){return _s("interface",t,e,n,i,r,function(){Un===Bn&&(Un=0);return Un=Un+1|0}())}function bs(t,e,n,i,r){return _s("object",t,e,n,i,r,null)}function ws(t){var e=t.length,n=Array(e),i=0,r=e-1|0;if(i<=r)do{var s=i;i=i+1|0;var o=t[s];null!=o&&qs(o)?n[s]=o:n[s]=[].slice.call(o)}while(s!==r);return[].concat.apply([],n)}function ys(t){return t instanceof Gr?t.k5():function(t){var e;e=t>2147483647?2147483647:t<-2147483648?-2147483648:0|t;return e}(t)}function Es(t){return Array.isArray(t)}function ks(t,e){return function(t,e){var n,i=t.$imask$;if(null==i)return!1;n=i;return function(t,e){var n=e>>5;if(n>t.length)return!1;var i=1<<(31&e);return!(0==(t[n]&i))}(n,e)}(t,e.$metadata$.iid)}function qs(t){return!!Es(t)&&!t.$type$}function Ss(t){var e=t.constructor,n=null==e?null:e.$metadata$,i=null==n?null:n.errorInfo;if(null!=i)return i;var r,s=0;if(Cs(t,"message")&&(s|=1),Cs(t,"cause")&&(s|=2),3!==s){var o=(r=t,Object.getPrototypeOf(r));o!=Error.prototype&&(s|=Ss(o))}return null!=n&&(n.errorInfo=s),s}function Cs(t,e){return t.hasOwnProperty(e)}function As(t,e,n,i){n=n===Bn?0:n,i=i===Bn?t.length:i,$n.h(n,i,t.length),t.fill(e,n,i)}function Is(t){return Br(t),Rs.call(t),t}function Ts(t,e){return Br(e,t),Rs.call(e),e}function Ls(t){var e=Ts(t,Ur(Nr(Rs)));return jr(e,Ls),e}function Rs(){jr(this,Rs)}function xs(t){var e=function(t,e){return $s(t,e),Os.call(e),e}(t,Ur(Nr(Os)));return jr(e,xs),e}function Os(){jr(this,Os)}function Ms(t){var e=function(t,e){return $s(t,e),Ps.call(e),e}(t,Ur(Nr(Ps)));return jr(e,Ms),e}function Ps(){jr(this,Ps)}function js(t){var e=function(t,e){return $s(t,e),Ns.call(e),e}(t,Ur(Nr(Ns)));return jr(e,js),e}function Ns(){jr(this,Ns)}function Ds(){var t,e=(Bs(t=Ur(Nr(Us))),Us.call(t),t);return jr(e,Ds),e}function Us(){jr(this,Us)}function Bs(t){return Is(t),zs.call(t),t}function $s(t,e){return Ts(t,e),zs.call(e),e}function Ws(t){var e=$s(t,Ur(Nr(zs)));return jr(e,Ws),e}function zs(){jr(this,zs)}function Vs(){var t,e=(Bs(t=Ur(Nr(Gs))),Gs.call(t),t);return jr(e,Vs),e}function Fs(t){var e=function(t,e){return $s(t,e),Gs.call(e),e}(t,Ur(Nr(Gs)));return jr(e,Fs),e}function Gs(){jr(this,Gs)}function Js(){var t,e=(Bs(t=Ur(Nr(Qs))),Qs.call(t),t);return jr(e,Js),e}function Qs(){jr(this,Qs)}function Hs(t){var e=function(t,e){return $s(t,e),Ys.call(e),e}(t,Ur(Nr(Ys)));return jr(e,Hs),e}function Ys(){jr(this,Ys)}function Ks(){var t,e=(Bs(t=Ur(Nr(Zs))),Zs.call(t),t);return jr(e,Ks),e}function Zs(){jr(this,Zs)}function Xs(){var t,e=(Bs(t=Ur(Nr(to))),to.call(t),t);return jr(e,Xs),e}function to(){jr(this,to)}function eo(t){var e=function(t,e){return $s(t,e),no.call(e),e}(t,Ur(Nr(no)));return jr(e,eo),e}function no(){jr(this,no)}function io(){}function ro(){this.g_1=2147483639}function so(t,e){return e===t?"(this Map)":dr(e)}function oo(t,e){var n;t:{for(var i=t.k1().l();i.m();){var r=i.o();if(Pr(r.l1(),e)){n=r;break t}}n=null}return n}function ao(){this.n1_1=null,this.o1_1=null}function uo(){}function ho(){return t=Ur(Nr(go)),ui.call(t),go.call(t),t.q5_1=mo().s5_1,t;var t}function co(t,e){if(e<0)throw js("Deque is too big.");if(e<=t.q5_1.length)return bn;if(t.q5_1===mo().s5_1){var n=t,i=er(e,10);return n.q5_1=_r(Array(i),null),bn}!function(t,e){var n=_r(Array(e),null),i=t.q5_1,r=t.p5_1,s=t.q5_1.length;ri(i,n,0,r,s);var o=t.q5_1,a=t.q5_1.length-t.p5_1|0,u=t.p5_1;ri(o,n,a,0,u),t.p5_1=0,t.q5_1=n}(t,$n.z2(t.q5_1.length,e))}function lo(t,e){return e>=t.q5_1.length?e-t.q5_1.length|0:e}function fo(t,e){return e===Zi(t.q5_1)?0:e+1|0}function po(t,e){return 0===e?Zi(t.q5_1):e-1|0}function vo(t,e,n){var i=n.l(),r=e,s=t.q5_1.length;if(r<s)t:do{var o=r;if(r=r+1|0,!i.m())break t;t.q5_1[o]=i.o()}while(r<s);var a=0,u=t.p5_1;if(a<u)t:do{var h=a;if(a=a+1|0,!i.m())break t;t.q5_1[h]=i.o()}while(a<u);t.r5_1=t.r5_1+n.q()|0}function _o(){zn=this;this.s5_1=[],this.t5_1=10}function mo(){return null==zn&&new _o,zn}function go(){mo(),this.p5_1=0,this.r5_1=0}function bo(){return function(){null==Vn&&new yo;return Vn}()}function wo(t){return t.q()-1|0}function yo(){Vn=this,this.b6_1=new Gr(-1478467534,-1720727600)}function Eo(){}function ko(t,e){this.d6_1=t,this.e6_1=e}function qo(t,e){return t.p(function(t){return new wi(t)}(e))}function So(){}function Co(t,e,n){return Ao(Ao(t,n)-Ao(e,n)|0,n)}function Ao(t,e){var n=t%e|0;return n>=0?n:n+e|0}function Io(){Gn=this,this.i6_1=new To(1,0)}function To(t,e){null==Gn&&new Io,xo.call(this,t,e,1)}function Lo(t,e,n){So.call(this),this.p6_1=n,this.q6_1=e,this.r6_1=this.p6_1>0?t<=e:t>=e,this.s6_1=this.r6_1?t:this.q6_1}function Ro(){}function xo(t,e,n){if(0===n)throw xs("Step must be non-zero.");if(n===wn.MIN_VALUE)throw xs("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.m6_1=t,this.n6_1=function(t,e,n){var i;if(n>0)i=t>=e?e:e-Co(e,t,n)|0;else{if(!(n<0))throw xs("Step is zero.");i=t<=e?e:e+Co(t,e,0|-n)|0}return i}(t,e,n),this.o6_1=n}function Oo(t,e,n){var i;null!=n?t.d4(n(e)):null==e||("string"==typeof(i=e)||ks(i,Kn))?t.d4(e):e instanceof or?t.t3(e.t6_1):t.d4(dr(e))}function Mo(t,e,n){if(t===e)return!0;if(!(n=n!==Bn&&n))return!1;var i,r=Hi(t),s=Hi(e);r===s?i=!0:i=qr(ir(r).toLowerCase(),0)===qr(ir(s).toLowerCase(),0);return i}function Po(t){return Cr(t)-1|0}function jo(t,e,n){return n=n!==Bn&&n,"string"==typeof e?function(t,e,n,i){var r,s;n=n===Bn?0:n,s=!!(i=i!==Bn&&i)||!("string"==typeof t);r=s?No(t,e,n,Cr(t),i):t.indexOf(e,n);return r}(t,e,Bn,n)>=0:No(t,e,0,Cr(t),n)>=0}function No(t,e,n,i,r,s){var o,a,u=(s=s!==Bn&&s)?function(t,e){return Jn.e4(t,e,-1)}(nr(n,Po(t)),er(i,0)):(o=er(n,0),a=nr(i,Cr(t)),new To(o,a));if("string"==typeof t&&"string"==typeof e){var h=u.m6_1,c=u.n6_1,l=u.o6_1;if(l>0&&h<=c||l<0&&c<=h)do{var f=h;if(h=h+l|0,Yi(e,0,t,f,Cr(e),r))return f}while(f!==c)}else{var d=u.m6_1,p=u.n6_1,v=u.o6_1;if(v>0&&d<=p||v<0&&p<=d)do{var _=d;if(d=d+v|0,Do(e,0,t,_,Cr(e),r))return _}while(_!==p)}return-1}function Do(t,e,n,i,r,s){if(i<0||e<0||e>(Cr(t)-r|0)||i>(Cr(n)-r|0))return!1;var o=0;if(o<r)do{var a=o;if(o=o+1|0,!Mo(qr(t,e+a|0),qr(n,i+a|0),s))return!1}while(o<r);return!0}function Uo(t,e){this.u6_1=t,this.v6_1=e}ms(Kn,"CharSequence",gs),ms(Zn,"Number",vs),ms(Xn,"Unit",bs),ms(ti,"IntCompanionObject",bs),ms(ur,"Collection",gs),ms(io,"AbstractCollection",vs,Bn,[ur]),ms(oi,"AbstractMutableCollection",vs,io,[io,ur]),ms(ai,"IteratorImpl",vs),ms(ar,"List",gs,Bn,[ur]),ms(ui,"AbstractMutableList",vs,oi,[oi,ur,ar]),ms(cr,"Map",gs),ms(ao,"AbstractMap",vs,Bn,[cr]),ms(hi,"AbstractMutableMap",vs,ao,[ao,cr]),ms(lr,"Set",gs,Bn,[ur]),ms(ci,"AbstractMutableSet",vs,oi,[oi,ur,lr]),ms(vi,"Companion",bs),ms(wi,"ArrayList",vs,ui,[ui,ur,ar],_i),ms(Ei,"HashMap",vs,hi,[hi,cr],(function(){return yi(Ur(Nr(Ei)))})),ms(qi,"HashMapEntrySetBase",vs,ci,[ur,lr,ci]),ms(ki,"HashMapEntrySet",vs,qi),ms(Di,"Companion",bs),ms(Ui,"Itr",vs),ms(Bi,"EntriesItr",vs,Ui),ms(hr,"Entry",gs),ms($i,"EntryRef",vs,Bn,[hr]),ms(zi,"InternalMap",gs),ms(Wi,"InternalHashMap",vs,Bn,[zi],Ii),ms(Fi,"LinkedHashMap",vs,Ei,[Ei,cr],Vi),ms(Qi,"StringBuilder",vs,Bn,[Kn],Ji),ms(rr,"Companion",bs),ms(or,"Char",vs),ms((function(){}),"Companion",bs),ms(fr,"Enum",vs),ms(mr,Bn,vs),ms(Fr,"Companion",bs),ms(Gr,"Long",vs,Zn),ms(Rs,"Exception",vs,Error,Bn,(function t(){var e=Is(Ur(Nr(Rs)));return jr(e,t),e})),ms(zs,"RuntimeException",vs,Rs,Bn,(function t(){var e=Bs(Ur(Nr(zs)));return jr(e,t),e})),ms(Os,"IllegalArgumentException",vs,zs,Bn,(function t(){var e=(n=Ur(Nr(Os)),Bs(n),Os.call(n),n);var n;return jr(e,t),e})),ms(Ps,"IndexOutOfBoundsException",vs,zs,Bn,(function t(){var e=(n=Ur(Nr(Ps)),Bs(n),Ps.call(n),n);var n;return jr(e,t),e})),ms(Ns,"IllegalStateException",vs,zs,Bn,(function t(){var e=(n=Ur(Nr(Ns)),Bs(n),Ns.call(n),n);var n;return jr(e,t),e})),ms(Us,"UnsupportedOperationException",vs,zs,Bn,Ds),ms(Gs,"NoSuchElementException",vs,zs,Bn,Vs),ms(Qs,"ConcurrentModificationException",vs,zs,Bn,Js),ms(Ys,"ArithmeticException",vs,zs,Bn,(function t(){var e=(n=Ur(Nr(Ys)),Bs(n),Ys.call(n),n);var n;return jr(e,t),e})),ms(Zs,"NullPointerException",vs,zs,Bn,Ks),ms(to,"ClassCastException",vs,zs,Bn,Xs),ms(no,"UninitializedPropertyAccessException",vs,zs,Bn,(function t(){var e=(n=Ur(Nr(no)),Bs(n),no.call(n),n);var n;return jr(e,t),e})),ms(ro,"Companion",bs),ms((function(){}),"Companion",bs),ms(uo,"Companion",bs),ms(_o,"Companion",bs),ms(go,"ArrayDeque",vs,ui,Bn,ho),ms(yo,"EmptyList",bs,Bn,[ar]),ms(Eo,"EmptyIterator",bs),ms(ko,"ArrayAsCollection",vs,Bn,[ur]),ms(So,"IntIterator",vs),ms(Io,"Companion",bs),ms(xo,"IntProgression",vs),ms(To,"IntRange",vs,xo),ms(Lo,"IntProgressionIterator",vs,So),ms(Ro,"Companion",bs),ms(Uo,"Pair",vs),Nr(Xn).toString=function(){return"kotlin.Unit"},Nr(ti).c=function(){return this.MIN_VALUE},Nr(ti).d=function(){return this.MAX_VALUE},Nr(ti).e=function(){return this.SIZE_BYTES},Nr(ti).f=function(){return this.SIZE_BITS},Nr(oi).j=function(t){this.k();for(var e=this.l();e.m();)if(Pr(e.o(),t))return e.n(),!0;return!1},Nr(oi).p=function(t){this.k();for(var e=!1,n=t.l();n.m();){var i=n.o();this.i(i)&&(e=!0)}return e},Nr(oi).toJSON=function(){return this.toArray()},Nr(oi).k=function(){},Nr(ai).m=function(){return this.u_1<this.w_1.q()},Nr(ai).o=function(){if(!this.m())throw Vs();var t=this.u_1;return this.u_1=t+1|0,this.v_1=t,this.w_1.x(this.v_1)},Nr(ai).n=function(){if(-1===this.v_1){throw js(xr("Call next() or previous() before removing element from the iterator."))}this.w_1.z(this.v_1),this.u_1=this.v_1,this.v_1=-1},Nr(ui).i=function(t){return this.k(),this.a1(this.q(),t),!0},Nr(ui).l=function(){return new ai(this)},Nr(ui).r=function(t){return this.b1(t)>=0},Nr(ui).b1=function(t){var e;t:{for(var n=0,i=this.l();i.m();){if(Pr(i.o(),t)){e=n;break t}n=n+1|0}e=-1}return e},Nr(ui).equals=function(t){return t===this||!(null==t||!ks(t,ar))&&$n.c1(this,t)},Nr(ui).hashCode=function(){return $n.d1(this)},Nr(hi).j1=function(t){this.k();for(var e=this.k1().l();e.m();){var n=e.o();if(Pr(t,n.l1())){var i=n.m1();return e.n(),i}}return null},Nr(hi).k=function(){},Nr(ci).equals=function(t){return t===this||!(null==t||!ks(t,lr))&&Wn.s1(this,t)},Nr(ci).hashCode=function(){return Wn.t1(this)},Nr(wi).q=function(){return this.v1_1.length},Nr(wi).x=function(t){var e=this.v1_1[bi(this,t)];return null==e||null!=e?e:Wr()},Nr(wi).i=function(t){return this.k(),this.v1_1.push(t),this.y_1=this.y_1+1|0,!0},Nr(wi).a1=function(t,e){this.k(),this.v1_1.splice(function(t,e){return $n.z1(e,t.q()),e}(this,t),0,e),this.y_1=this.y_1+1|0},Nr(wi).p=function(t){if(this.k(),t.t())return!1;for(var e,n,i,r=(e=this,n=t.q(),i=e.q(),e.v1_1.length=e.q()+n|0,i),s=0,o=t.l();o.m();){var a=o.o(),u=s;s=u+1|0;var h=si(u);this.v1_1[r+h|0]=a}return this.y_1=this.y_1+1|0,!0},Nr(wi).z=function(t){return this.k(),bi(this,t),this.y_1=this.y_1+1|0,t===wo(this)?this.v1_1.pop():this.v1_1.splice(t,1)[0]},Nr(wi).j=function(t){this.k();var e=0,n=this.v1_1.length-1|0;if(e<=n)do{var i=e;if(e=e+1|0,Pr(this.v1_1[i],t))return this.v1_1.splice(i,1),this.y_1=this.y_1+1|0,!0}while(e<=n);return!1},Nr(wi).b1=function(t){return Xi(this.v1_1,t)},Nr(wi).toString=function(){return t=this.v1_1,e=(e=", ")===Bn?", ":e,n=(n="[")===Bn?"":n,i=(i="]")===Bn?"":i,r=(r=Bn)===Bn?-1:r,s=(s=Bn)===Bn?"...":s,o=(o=Ar)===Bn?null:o,function(t,e,n,i,r,s,o,a){n=n===Bn?", ":n,i=i===Bn?"":i,r=r===Bn?"":r,s=s===Bn?-1:s,o=o===Bn?"...":o,a=a===Bn?null:a,e.d4(i);var u=0,h=0,c=t.length;t:for(;h<c;){var l=t[h];if(h=h+1|0,(u=u+1|0)>1&&e.d4(n),!(s<0||u<=s))break t;Oo(e,l,a)}return s>=0&&u>s&&e.d4(o),e.d4(r),e}(t,Ji(),e,n,i,r,s,o).toString();var t,e,n,i,r,s,o},Nr(wi).a2=function(){return[].slice.call(this.v1_1)},Nr(wi).toArray=function(){return this.a2()},Nr(wi).k=function(){if(this.w1_1)throw Ds()},Nr(Ei).p1=function(t){return this.f2_1.h2(t)},Nr(Ei).k1=function(){var t,e=this.g2_1;if(null==e){var n=new ki(this.f2_1);this.g2_1=n,t=n}else t=e;return t},Nr(Ei).r1=function(t){return this.f2_1.r1(t)},Nr(Ei).i1=function(t,e){return this.f2_1.i1(t,e)},Nr(Ei).j1=function(t){return this.f2_1.j1(t)},Nr(Ei).q=function(){return this.f2_1.q()},Nr(ki).l=function(){return this.j2_1.k2()},Nr(qi).q=function(){return this.j2_1.q()},Nr(qi).t=function(){return 0===this.j2_1.q()},Nr(qi).l2=function(t){return this.j2_1.n2(t)},Nr(qi).r=function(t){return!(null==t||!ks(t,hr))&&this.l2(null!=t&&ks(t,hr)?t:Wr())},Nr(qi).m2=function(t){throw Ds()},Nr(qi).i=function(t){return this.m2(null!=t&&ks(t,hr)?t:Wr())},Nr(qi).p=function(t){throw Ds()},Nr(qi).s=function(t){return this.j2_1.o2(t)},Nr(qi).k=function(){return this.j2_1.k()},Nr(Ui).i3=function(){for(;this.f3_1<this.e3_1.u2_1&&this.e3_1.r2_1[this.f3_1]<0;)this.f3_1=this.f3_1+1|0},Nr(Ui).m=function(){return this.f3_1<this.e3_1.u2_1},Nr(Ui).n=function(){if(this.j3(),-1===this.g3_1){throw js(xr("Call next() before removing element from the iterator."))}this.e3_1.k(),Ni(this.e3_1,this.g3_1),this.g3_1=-1,this.h3_1=this.e3_1.w2_1},Nr(Ui).j3=function(){if(this.e3_1.w2_1!==this.h3_1)throw Js()},Nr(Bi).o=function(){if(this.j3(),this.f3_1>=this.e3_1.u2_1)throw Vs();var t=this.f3_1;this.f3_1=t+1|0,this.g3_1=t;var e=new $i(this.e3_1,this.g3_1);return this.i3(),e},Nr(Bi).o3=function(){if(this.f3_1>=this.e3_1.u2_1)throw Vs();var t=this.f3_1;this.f3_1=t+1|0,this.g3_1=t;var e=this.e3_1.p2_1[this.g3_1],n=null==e?null:Or(e),i=null==n?0:n,r=$r(this.e3_1.q2_1)[this.g3_1],s=null==r?null:Or(r),o=i^(null==s?0:s);return this.i3(),o},Nr(Bi).p3=function(t){if(this.f3_1>=this.e3_1.u2_1)throw Vs();var e=this.f3_1;this.f3_1=e+1|0,this.g3_1=e;var n=this.e3_1.p2_1[this.g3_1];Pr(n,this.e3_1)?t.s3("(this Map)"):t.r3(n),t.t3(61);var i=$r(this.e3_1.q2_1)[this.g3_1];Pr(i,this.e3_1)?t.s3("(this Map)"):t.r3(i),this.i3()},Nr($i).l1=function(){return this.u3_1.p2_1[this.v3_1]},Nr($i).m1=function(){return $r(this.u3_1.q2_1)[this.v3_1]},Nr($i).equals=function(t){return!!(!(null==t||!ks(t,hr))&&Pr(t.l1(),this.l1()))&&Pr(t.m1(),this.m1())},Nr($i).hashCode=function(){var t=this.l1(),e=null==t?null:Or(t),n=null==e?0:e,i=this.m1(),r=null==i?null:Or(i);return n^(null==r?0:r)},Nr($i).toString=function(){return this.l1()+"="+this.m1()},Nr(Wi).q=function(){return this.x2_1},Nr(Wi).r1=function(t){var e=ji(this,t);return e<0?null:$r(this.q2_1)[e]},Nr(Wi).h2=function(t){return ji(this,t)>=0},Nr(Wi).i1=function(t,e){var n=function(t,e){t.k();t:for(;;)for(var n=Oi(t,e),i=nr(Yn(t.t2_1,2),Li(t)/2|0),r=0;;){var s=t.s2_1[n];if(s<=0){if(t.u2_1>=Ti(t)){xi(t,1);continue t}var o=t.u2_1;t.u2_1=o+1|0;var a=o;return t.p2_1[a]=e,t.r2_1[a]=n,t.s2_1[n]=a+1|0,t.x2_1=t.x2_1+1|0,Ri(t),r>t.t2_1&&(t.t2_1=r),a}if(Pr(t.p2_1[s-1|0],e))return 0|-s;if((r=r+1|0)>i){Mi(t,Yn(Li(t),2));continue t}var u=n;n=u-1|0,0===u&&(n=Li(t)-1|0)}}(this,t),i=function(t){var e=t.q2_1;if(null!=e)return e;var n=li(Ti(t));return t.q2_1=n,n}(this);if(n<0){var r=i[(0|-n)-1|0];return i[(0|-n)-1|0]=e,r}return i[n]=e,null},Nr(Wi).j1=function(t){var e=function(t,e){t.k();var n=ji(t,e);return n<0?-1:(Ni(t,n),n)}(this,t);if(e<0)return null;var n=$r(this.q2_1),i=n[e];return fi(n,e),i},Nr(Wi).equals=function(t){var e;t===this?e=!0:e=!(null==t||!ks(t,cr))&&function(t,e){return t.x2_1===e.q()&&t.o2(e.k1())}(this,t);return e},Nr(Wi).hashCode=function(){for(var t=0,e=this.k2();e.m();)t=t+e.o3()|0;return t},Nr(Wi).toString=function(){var t,e=(Yn(this.x2_1,3),Gi(t=Ur(Nr(Qi))),t);e.s3("{");for(var n=0,i=this.k2();i.m();)n>0&&e.s3(", "),i.p3(e),n=n+1|0;return e.s3("}"),e.toString()},Nr(Wi).k=function(){if(this.y2_1)throw Ds()},Nr(Wi).n2=function(t){var e=ji(this,t.l1());return!(e<0)&&Pr($r(this.q2_1)[e],t.m1())},Nr(Wi).w3=function(t){return this.n2(ks(t,hr)?t:Wr())},Nr(Wi).k2=function(){return new Bi(this)},Nr(Fi).k=function(){return this.f2_1.k()},Nr(Qi).a=function(){return this.q3_1.length},Nr(Qi).b=function(t){var e=this.q3_1;if(!(t>=0&&t<=Po(e)))throw Ms("index: "+t+", length: "+this.a()+"}");return qr(e,t)},Nr(Qi).t3=function(t){return this.q3_1=this.q3_1+ir(t),this},Nr(Qi).d4=function(t){return this.q3_1=this.q3_1+dr(t),this},Nr(Qi).r3=function(t){return this.q3_1=this.q3_1+dr(t),this},Nr(Qi).s3=function(t){var e=this.q3_1;return this.q3_1=e+(null==t?"null":t),this},Nr(Qi).toString=function(){return this.q3_1},Nr(fr).r4=function(){return this.p4_1},Nr(fr).s4=function(){return this.q4_1},Nr(fr).t4=function(t){return function(t,e){var n;switch(typeof t){case"number":n="number"==typeof e?Ir(t,e):e instanceof Gr?Ir(t,e.z4()):Tr(t,e);break;case"string":case"boolean":n=Tr(t,e);break;default:n=function(t,e){return t.u4(e)}(t,e)}return n}(this.q4_1,t.q4_1)},Nr(fr).u4=function(t){return this.t4(t instanceof fr?t:Wr())},Nr(fr).equals=function(t){return this===t},Nr(fr).hashCode=function(){return Lr(this)},Nr(fr).toString=function(){return this.p4_1},Nr(mr).m=function(){return!(this.v4_1===this.w4_1.length)},Nr(mr).o=function(){if(this.v4_1===this.w4_1.length)throw Fs(""+this.v4_1);var t=this.v4_1;return this.v4_1=t+1|0,this.w4_1[t]},Nr(Gr).e5=function(t){return Zr(this,t)},Nr(Gr).u4=function(t){return this.e5(t instanceof Gr?t:Wr())},Nr(Gr).f5=function(t){return Xr(this,t)},Nr(Gr).g5=function(t){return ts(this,t)},Nr(Gr).h5=function(t){return function(t,e){if(ps(),as(e))throw Ls("division by zero");if(as(t))return Jr();if(is(t,Yr())){if(is(e,Qr())||is(e,Hr()))return Yr();if(is(e,Yr()))return Qr();var n=function(t,e){ps();var n=63&e;return 0===n?t:n<32?new Gr(t.x4_1<<n,t.y4_1<<n|t.x4_1>>>(32-n|0)|0):new Gr(0,t.x4_1<<(n-32|0))}(function(t,e){ps();var n=63&e;return 0===n?t:n<32?new Gr(t.x4_1>>>n|0|t.y4_1<<(32-n|0),t.y4_1>>n):new Gr(t.y4_1>>(n-32|0),t.y4_1>=0?0:-1)}(t,1).h5(e),1);return is(n,Jr())?os(e)?Qr():Hr():Xr(n,ts(t,es(e,n)).h5(e))}if(is(e,Yr()))return Jr();if(os(t))return os(e)?hs(t).h5(hs(e)):hs(hs(t).h5(e));if(os(e))return hs(t.h5(hs(e)));var i=Jr(),r=t;for(;ds(r,e);){for(var s=ns(r)/ns(e),o=Math.max(1,Math.floor(s)),a=Math.ceil(Math.log(o)/Math.LN2),u=a<=48?1:Math.pow(2,a-48),h=ls(o),c=es(h,e);os(c)||fs(c,r);)c=es(h=ls(o-=u),e);as(h)&&(h=Qr()),i=Xr(i,h),r=ts(r,c)}return i}(this,t)},Nr(Gr).i5=function(){return this.j5().f5(new Gr(1,0))},Nr(Gr).j5=function(){return new Gr(~this.x4_1,~this.y4_1)},Nr(Gr).k5=function(){return this.x4_1},Nr(Gr).z4=function(){return ns(this)},Nr(Gr).valueOf=function(){return this.z4()},Nr(Gr).equals=function(t){return t instanceof Gr&&is(this,t)},Nr(Gr).hashCode=function(){return t=this,ps(),t.x4_1^t.y4_1;var t},Nr(Gr).toString=function(){return rs(this,10)},Nr(io).r=function(t){var e;t:{if(!!ks(this,ur)&&this.t())e=!1;else{for(var n=this.l();n.m();){if(Pr(n.o(),t)){e=!0;break t}}e=!1}}return e},Nr(io).s=function(t){var e;t:{if(!!ks(t,ur)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!this.r(i)){e=!1;break t}}e=!0}}return e},Nr(io).t=function(){return 0===this.q()},Nr(io).toString=function(){return tr(this,", ","[","]",Bn,Bn,(t=this,function(e){return e===t?"(this Collection)":dr(e)}));var t},Nr(io).toArray=function(){return ei(this)},Nr(ro).y1=function(t,e){if(t<0||t>=e)throw Ms("index: "+t+", size: "+e)},Nr(ro).z1=function(t,e){if(t<0||t>e)throw Ms("index: "+t+", size: "+e)},Nr(ro).h=function(t,e,n){if(t<0||e>n)throw Ms("fromIndex: "+t+", toIndex: "+e+", size: "+n);if(t>e)throw xs("fromIndex: "+t+" > toIndex: "+e)},Nr(ro).z2=function(t,e){var n=t+(t>>1)|0;return(n-e|0)<0&&(n=e),(n-2147483639|0)>0&&(n=e>2147483639?wn.MAX_VALUE:2147483639),n},Nr(ro).d1=function(t){for(var e=1,n=t.l();n.m();){var i=n.o(),r=Yn(31,e),s=null==i?null:Or(i);e=r+(null==s?0:s)|0}return e},Nr(ro).c1=function(t,e){if(t.q()!==e.q())return!1;for(var n=e.l(),i=t.l();i.m();){if(!Pr(i.o(),n.o()))return!1}return!0},Nr(ao).p1=function(t){return!(null==oo(this,t))},Nr(ao).q1=function(t){if(null==t||!ks(t,hr))return!1;var e=t.l1(),n=t.m1(),i=(ks(this,cr)?this:Wr()).r1(e);return!!Pr(n,i)&&!(null==i&&!(ks(this,cr)?this:Wr()).p1(e))},Nr(ao).equals=function(t){if(t===this)return!0;if(null==t||!ks(t,cr))return!1;if(this.q()!==t.q())return!1;var e;t:{var n=t.k1();if(!!ks(n,ur)&&n.t())e=!0;else{for(var i=n.l();i.m();){var r=i.o();if(!this.q1(r)){e=!1;break t}}e=!0}}return e},Nr(ao).r1=function(t){var e=oo(this,t);return null==e?null:e.m1()},Nr(ao).hashCode=function(){return Or(this.k1())},Nr(ao).q=function(){return this.k1().q()},Nr(ao).toString=function(){var t;return tr(this.k1(),", ","{","}",Bn,Bn,(t=this,function(e){return t.n5(e)}))},Nr(ao).n5=function(t){return so(this,t.l1())+"="+so(this,t.m1())},Nr(uo).t1=function(t){for(var e=0,n=t.l();n.m();){var i=n.o(),r=e,s=null==i?null:Or(i);e=r+(null==s?0:s)|0}return e},Nr(uo).s1=function(t,e){return t.q()===e.q()&&t.s(e)},Nr(go).q=function(){return this.r5_1},Nr(go).t=function(){return 0===this.r5_1},Nr(go).u5=function(t){co(this,this.r5_1+1|0),this.p5_1=po(this,this.p5_1),this.q5_1[this.p5_1]=t,this.r5_1=this.r5_1+1|0},Nr(go).v5=function(t){co(this,this.r5_1+1|0);var e=this.q5_1,n=this.r5_1;e[lo(this,this.p5_1+n|0)]=t,this.r5_1=this.r5_1+1|0},Nr(go).w5=function(){if(this.t())throw Fs("ArrayDeque is empty.");var t=this.p5_1,e=this.q5_1[t],n=null==e||null!=e?e:Wr();return this.q5_1[this.p5_1]=null,this.p5_1=fo(this,this.p5_1),this.r5_1=this.r5_1-1|0,n},Nr(go).x5=function(){if(this.t())throw Fs("ArrayDeque is empty.");var t=wo(this),e=lo(this,this.p5_1+t|0),n=this.q5_1[e],i=null==n||null!=n?n:Wr();return this.q5_1[e]=null,this.r5_1=this.r5_1-1|0,i},Nr(go).i=function(t){return this.v5(t),!0},Nr(go).a1=function(t,e){if($n.z1(t,this.r5_1),t===this.r5_1)return this.v5(e),bn;if(0===t)return this.u5(e),bn;co(this,this.r5_1+1|0);var n=lo(this,this.p5_1+t|0);if(t<(this.r5_1+1|0)>>1){var i=po(this,n),r=po(this,this.p5_1);if(i>=this.p5_1)this.q5_1[r]=this.q5_1[this.p5_1],ri(this.q5_1,this.q5_1,this.p5_1,this.p5_1+1|0,i+1|0);else ri(this.q5_1,this.q5_1,this.p5_1-1|0,this.p5_1,this.q5_1.length),this.q5_1[this.q5_1.length-1|0]=this.q5_1[0],ri(this.q5_1,this.q5_1,0,1,i+1|0);this.q5_1[i]=e,this.p5_1=r}else{var s=this.r5_1,o=lo(this,this.p5_1+s|0);if(n<o)ri(this.q5_1,this.q5_1,n+1|0,n,o);else ri(this.q5_1,this.q5_1,1,0,o),this.q5_1[0]=this.q5_1[this.q5_1.length-1|0],ri(this.q5_1,this.q5_1,n+1|0,n,this.q5_1.length-1|0);this.q5_1[n]=e}this.r5_1=this.r5_1+1|0},Nr(go).p=function(t){if(t.t())return!1;co(this,this.r5_1+t.q()|0);var e=this.r5_1;return vo(this,lo(this,this.p5_1+e|0),t),!0},Nr(go).y5=function(t,e){if($n.z1(t,this.r5_1),e.t())return!1;if(t===this.r5_1)return this.p(e);co(this,this.r5_1+e.q()|0);var n=this.r5_1,i=lo(this,this.p5_1+n|0),r=lo(this,this.p5_1+t|0),s=e.q();if(t<(this.r5_1+1|0)>>1){var o=this.p5_1-s|0;if(r>=this.p5_1)if(o>=0){ri(this.q5_1,this.q5_1,o,this.p5_1,r)}else{o=o+this.q5_1.length|0;var a=r-this.p5_1|0,u=this.q5_1.length-o|0;if(u>=a)ri(this.q5_1,this.q5_1,o,this.p5_1,r);else ri(this.q5_1,this.q5_1,o,this.p5_1,this.p5_1+u|0),ri(this.q5_1,this.q5_1,0,this.p5_1+u|0,r)}else if(ri(this.q5_1,this.q5_1,o,this.p5_1,this.q5_1.length),s>=r)ri(this.q5_1,this.q5_1,this.q5_1.length-s|0,0,r);else ri(this.q5_1,this.q5_1,this.q5_1.length-s|0,0,s),ri(this.q5_1,this.q5_1,0,s,r);this.p5_1=o,vo(this,function(t,e){return e<0?e+t.q5_1.length|0:e}(this,r-s|0),e)}else{var h=r+s|0;if(r<i)if((i+s|0)<=this.q5_1.length)ri(this.q5_1,this.q5_1,h,r,i);else if(h>=this.q5_1.length){ri(this.q5_1,this.q5_1,h-this.q5_1.length|0,r,i)}else{var c=(i+s|0)-this.q5_1.length|0;ri(this.q5_1,this.q5_1,0,i-c|0,i),ri(this.q5_1,this.q5_1,h,r,i-c|0)}else if(ri(this.q5_1,this.q5_1,s,0,i),h>=this.q5_1.length)ri(this.q5_1,this.q5_1,h-this.q5_1.length|0,r,this.q5_1.length);else ri(this.q5_1,this.q5_1,0,this.q5_1.length-s|0,this.q5_1.length),ri(this.q5_1,this.q5_1,h,r,this.q5_1.length-s|0);vo(this,r,e)}return!0},Nr(go).x=function(t){$n.y1(t,this.r5_1);var e=lo(this,this.p5_1+t|0),n=this.q5_1[e];return null==n||null!=n?n:Wr()},Nr(go).r=function(t){return!(-1===this.b1(t))},Nr(go).b1=function(t){var e=this.r5_1,n=lo(this,this.p5_1+e|0);if(this.p5_1<n){var i=this.p5_1;if(i<n)do{var r=i;if(i=i+1|0,Pr(t,this.q5_1[r]))return r-this.p5_1|0}while(i<n)}else if(this.p5_1>=n){var s=this.p5_1,o=this.q5_1.length;if(s<o)do{var a=s;if(s=s+1|0,Pr(t,this.q5_1[a]))return a-this.p5_1|0}while(s<o);var u=0;if(u<n)do{var h=u;if(u=u+1|0,Pr(t,this.q5_1[h]))return(h+this.q5_1.length|0)-this.p5_1|0}while(u<n)}return-1},Nr(go).j=function(t){var e=this.b1(t);return-1!==e&&(this.z(e),!0)},Nr(go).z=function(t){if($n.y1(t,this.r5_1),t===wo(this))return this.x5();if(0===t)return this.w5();var e=lo(this,this.p5_1+t|0),n=this.q5_1[e],i=null==n||null!=n?n:Wr();if(t<this.r5_1>>1){if(e>=this.p5_1)ri(this.q5_1,this.q5_1,this.p5_1+1|0,this.p5_1,e);else ri(this.q5_1,this.q5_1,1,0,e),this.q5_1[0]=this.q5_1[this.q5_1.length-1|0],ri(this.q5_1,this.q5_1,this.p5_1+1|0,this.p5_1,this.q5_1.length-1|0);this.q5_1[this.p5_1]=null,this.p5_1=fo(this,this.p5_1)}else{var r=wo(this),s=lo(this,this.p5_1+r|0);if(e<=s)ri(this.q5_1,this.q5_1,e,e+1|0,s+1|0);else ri(this.q5_1,this.q5_1,e,e+1|0,this.q5_1.length),this.q5_1[this.q5_1.length-1|0]=this.q5_1[0],ri(this.q5_1,this.q5_1,0,1,s+1|0);this.q5_1[s]=null}return this.r5_1=this.r5_1-1|0,i},Nr(go).z5=function(){var t=this.r5_1,e=lo(this,this.p5_1+t|0);this.p5_1<e?As(this.q5_1,null,this.p5_1,e):this.t()||(As(this.q5_1,null,this.p5_1,this.q5_1.length),As(this.q5_1,null,0,e)),this.p5_1=0,this.r5_1=0},Nr(go).a6=function(t){var e,n=t.length>=this.r5_1?t:(e=this.r5_1,_r(Array(e),null)),i=qs(n)?n:Wr(),r=this.r5_1,s=lo(this,this.p5_1+r|0);this.p5_1<s?ri(this.q5_1,i,0,this.p5_1,s):this.t()||(ri(this.q5_1,i,0,this.p5_1,this.q5_1.length),ri(this.q5_1,i,this.q5_1.length-this.p5_1|0,0,s));var o=function(t,e){return e}(this.r5_1,i);return qs(o)?o:Wr()},Nr(go).a2=function(){var t=this.r5_1,e=_r(Array(t),null);return this.a6(e)},Nr(go).toArray=function(){return this.a2()},Nr(yo).equals=function(t){return!(null==t||!ks(t,ar))&&t.t()},Nr(yo).hashCode=function(){return 1},Nr(yo).toString=function(){return"[]"},Nr(yo).q=function(){return 0},Nr(yo).t=function(){return!0},Nr(yo).c6=function(t){return t.t()},Nr(yo).s=function(t){return this.c6(t)},Nr(yo).x=function(t){throw Ms("Empty list doesn't contain element at index "+t+".")},Nr(yo).l=function(){return Fn},Nr(Eo).m=function(){return!1},Nr(Eo).o=function(){throw Vs()},Nr(ko).q=function(){return this.d6_1.length},Nr(ko).t=function(){return 0===this.d6_1.length},Nr(ko).f6=function(t){return function(t,e){return Xi(t,e)>=0}(this.d6_1,t)},Nr(ko).g6=function(t){var e;t:{if(!!ks(t,ur)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!this.f6(i)){e=!1;break t}}e=!0}}return e},Nr(ko).s=function(t){return this.g6(t)},Nr(ko).l=function(){return new mr(this.d6_1)},Nr(So).o=function(){return this.h6()},Nr(To).t=function(){return this.m6_1>this.n6_1},Nr(To).equals=function(t){return t instanceof To&&(!(!this.t()||!t.t())||this.m6_1===t.m6_1&&this.n6_1===t.n6_1)},Nr(To).hashCode=function(){return this.t()?-1:Yn(31,this.m6_1)+this.n6_1|0},Nr(To).toString=function(){return this.m6_1+".."+this.n6_1},Nr(Lo).m=function(){return this.r6_1},Nr(Lo).h6=function(){var t=this.s6_1;if(t===this.q6_1){if(!this.r6_1)throw Vs();this.r6_1=!1}else this.s6_1=this.s6_1+this.p6_1|0;return t},Nr(Ro).e4=function(t,e,n){return new xo(t,e,n)},Nr(xo).l=function(){return new Lo(this.m6_1,this.n6_1,this.o6_1)},Nr(xo).t=function(){return this.o6_1>0?this.m6_1>this.n6_1:this.m6_1<this.n6_1},Nr(xo).equals=function(t){return t instanceof xo&&(!(!this.t()||!t.t())||this.m6_1===t.m6_1&&this.n6_1===t.n6_1&&this.o6_1===t.o6_1)},Nr(xo).hashCode=function(){return this.t()?-1:Yn(31,Yn(31,this.m6_1)+this.n6_1|0)+this.o6_1|0},Nr(xo).toString=function(){return this.o6_1>0?this.m6_1+".."+this.n6_1+" step "+this.o6_1:this.m6_1+" downTo "+this.n6_1+" step "+(0|-this.o6_1)},Nr(Uo).toString=function(){return"("+this.u6_1+", "+this.v6_1+")"},Nr(Uo).hashCode=function(){var t=null==this.u6_1?0:Or(this.u6_1);return t=Yn(t,31)+(null==this.v6_1?0:Or(this.v6_1))|0},Nr(Uo).equals=function(t){if(this===t)return!0;if(!(t instanceof Uo))return!1;var e=t instanceof Uo?t:Wr();return!!Pr(this.u6_1,e.u6_1)&&!!Pr(this.v6_1,e.v6_1)},Nr(Wi).o2=function(t){var e;t:{if(!!ks(t,ur)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!(!(null==i||!ks(i,hr))&&this.w3(i))){e=!1;break t}}e=!0}}return e},bn=new Xn,wn=new ti,new Di,$n=new ro,Wn=new uo,Fn=new Eo,Jn=new Ro;var Bo,$o,Wo,zo,Vo,Fo,Go,Jo,Qo,Ho,Yo,Ko=Math.imul;function Zo(t,e){this.w6_1=t,this.x6_1=e}function Xo(t,e){this.b7_1=t,this.c7_1=e}function ta(t){var e=t.hook;return!0===(null==e?null:jo(e,"useInterval"))}function ea(t,e,n){this.request=t,this.response=e,this.mode=n}function na(){if(zo)return bn;zo=!0,Bo=new ia("SYNC",0),$o=new ia("ASYNC",1),Wo=new ia("SPEC",2)}function ia(t,e){fr.call(this,t,e)}function ra(){return na(),Bo}function sa(){return na(),$o}function oa(){return na(),Wo}function aa(t,e){this.m7_1=t,this.n7_1=e}function ua(t){var e=t.w7_1;if(null!=e)return e;zr("assembler")}function ha(t){var e=t.d8_1;if(null!=e)return e;zr("local")}function ca(t){var e=t.e8_1;if(null!=e)return e;zr("remote")}function la(t){var e=t.f8_1;if(null!=e)return e;zr("timers")}function fa(t){pa(t),t.k8_1=!0,t.t7_1.a7(["recalculateSpeculativeWork"]);var e=t.x7_1.l(),n=0;t:for(;e.m();){var i=n;n=n+1|0;var r=e.o();if(0!==i&&(!0!==r.retry&&!0!==r.async&&!r.scope.equals(Ta()))){if(t.z7_1.r5_1>10)break t;t.z7_1.i(r)}}t.t7_1.a7(["Speculative queue size: "+t.z7_1.r5_1]),ba(t,t.z7_1)}function da(t){t.t7_1.a7(["cancelSpeculation"]),t.k8_1=!1,pa(t)}function pa(t){t.z7_1.z5(),t.h8_1=t.q7_1.clone(t.state),t.i8_1=t.i8_1+1|0}function va(t,e,n){if(e.t())return bn;var i,r=function(t){if(t.t())throw Fs("List is empty.");return t.x(0)}(e),s=!!r.scope.equals(Ta())||!(!(i=r.scope).equals(Ta())&&!i.equals(Aa()))&&!ha(t).isReady();n.equals(ra())&&(t.a8_1=!0);var o=t.p7_1.l8(n.equals(oa())?t.h8_1:t.state,e),a=s?ca(t):ha(t),u=t.u7_1;t.u7_1=u+1|0;var h,c,l,f,d,p,v,_,m=u,g=t.i8_1,b=Yo.m8("runtime_trace"),w=new aa((h=t,c=n,l=s,f=b,d=e,p=m,v=g,_=o,function(t){if(h.t7_1.a7(["Signpost: Response success for "+_a(h,c,l)+" request"]),ba(h,t),f.u8(),ja(h.s7_1.performanceAnalyticsDelegate,f,l,"",d.q()),h.b8_1.j1(p),c.equals(oa())&&h.i8_1!==v)return h.t7_1.a7(["throwing away stale speculative results"]),bn;h.t7_1.a7(["Responding to "+_a(h,c,l)+" runtime result subscriptions"]);for(var e=h.c8_1.l();e.m();)e.o()(new ea(_,t,c));return c.equals(ra())?(h.state=h.q7_1.merge(h.state,t.state),h.a8_1=!1):c.equals(oa())&&(h.h8_1=h.q7_1.merge(h.h8_1,t.state)),h.v8(Ki(t.replay),c),c.equals(ra())&&h.j8_1&&fa(h),h.o8(),bn}),function(t,e,n,i,r,s){return function(o){t.t7_1.a7(["Signpost: Response error for "+_a(t,e,n)+" request",o]),i.u8(),ja(t.s7_1.performanceAnalyticsDelegate,i,n,"",r.q());var a=t.s7_1.performanceAnalyticsDelegate,u=o.message;if(function(t,e,n,i){t.logRuntimeError(new Oa(e,Na(n),i))}(a,null==u?"":u,n,""),t.b8_1.j1(s),e.equals(ra())&&(t.a8_1=!1),e.equals(oa()))return da(t),t.o8(),bn;for(var h=r,c=Vi(),l=h.l();l.m();){var f,d=l.o(),p=!d.scope.equals(Ta())&&!(!0===d.retry),v=c.r1(p);if(null==v){var _=_i();c.i1(p,_),f=_}else f=v;f.i(d)}var m=c,g=m.r1(!1);if(null!=g&&!g.t()){var b=m.r1(!1),w=ii(null==b?bo():b);t.t7_1.a7(ws([["unretryable events",o],w])),t.s7_1.errorHandler(o)}var y=m.r1(!0);if(null!=y&&!y.t()){var E=m.r1(!0);if(null==E);else for(var k=E.l();k.m();){var q=k.o();q.retry=!0,q.scope=Ta()}var S=m.r1(!0);t.v8(null==S?bo():S,e),e.equals(ra())&&t.j8_1&&fa(t),t.o8()}return bn}}(t,n,s,b,e,m));t.b8_1.i1(m,w),t.t7_1.a7(["Signpost: Handling "+_a(t,n,s)+" request"]),ba(t,o),a.handle(t.r7_1,o,w.m7_1,w.n7_1)}function _a(t,e,n){return(n?"remote":"local")+" "+e+" runtime"}function ma(t,e){t.k8_1=t.j8_1,t.a8_1=!1,t.state=t.q7_1.clone(t.g8_1),t.y7_1.z5(),t.x7_1.z5(),ha(t).reset(),ca(t).reset(),da(t),e&&la(t).clear()}function ga(t,e,n){var i;try{i=n()}catch(n){if(!(n instanceof Rs))throw n;var r=n;t.t7_1.n8([r]),t.s7_1.errorHandler(r),i=e}return i}function ba(t,e){t.s7_1.featureFlags.isVerboseLoggingEnabled&&t.t7_1.a7([e])}function wa(t,e){this.p8_1=t,this.q8_1=e}function ya(t,e,n,i,r){i=i===Bn?"RenderPostContent":i,r=r===Bn?new ka:r,this.o7_1=t,this.p7_1=e,this.q7_1=n,this.r7_1=i,this.s7_1=r,this.t7_1=new Ba(this.s7_1.logger),this.u7_1=0;var s;this.v7_1=new La((s=this,function(){return ha(s).isReady()}),this.t7_1),this.x7_1=ho(),this.y7_1=ho(),this.z7_1=ho(),this.a8_1=!1;this.b8_1=Vi();this.c8_1=_i(),this.g8_1=this.q7_1.clone(this.state),this.h8_1=this.q7_1.clone(this.g8_1),this.i8_1=0,this.j8_1=this.s7_1.featureFlags.isSpeculativeExecutionEnabled,this.k8_1=this.j8_1,this.t7_1.a7(["Signpost: Constructed KMP Dispatcher"])}function Ea(t){return bn}function ka(){this.d9_1=new $a;this.e9_1=Ea,this.f9_1=Ho,this.g9_1=new Pa}function qa(t,e,n,i,r,s){this.state=t,this.syncQueue=e,this.asyncQueue=n,this.localSnapshot=i,this.remoteSnapshot=r,this.timerSnapshot=s}function Sa(){if(Jo)return bn;Jo=!0,Vo=new Ca("ALL",0),Fo=new Ca("LOCAL",1),Go=new Ca("REMOTE",2)}function Ca(t,e){fr.call(this,t,e)}function Aa(){return Sa(),Vo}function Ia(){return Sa(),Fo}function Ta(){return Sa(),Go}function La(t,e){this.y9_1=t,this.z9_1=e}function Ra(){}function xa(t,e){this.spanName=t,this.durationMs=e}function Oa(t,e,n){this.message=t,this.origin=e,this.version=n}function Ma(){}function Pa(){}function ja(t,e,n,i,r){t.logRuntimeTrace(new Da(e.r8_1,e.ea().toString(),i,Na(n),r))}function Na(t){return t?"remote":"local"}function Da(t,e,n,i,r){xa.call(this,t,e),this.intent=n,this.target=i,this.eventCount=r}function Ua(){this.ia_1=!1,this.ja_1=!1,this.ka_1=!1}function Ba(t){this.z6_1=t}function $a(){}function Wa(t,e){this.id=t,this.duration=e}function za(t,e){this.r8_1=t,this.s8_1=e,this.t8_1=new Gr(0,0)}function Va(){}function Fa(t,e,n,i){n=n===Bn?"RenderPostContent":n,i=i===Bn?new ka:i,ya.call(this,t,new Ga(e),new Qa,n,i),this.ob_1=n,this.pb_1=i}function Ga(t){this.qb_1=t}function Ja(t){for(var e,n,i=Object.entries,r=(null!=i&&"function"==typeof i?i:Wr())(t),s=mi(r.length),o=0,a=r.length;o<a;){var u=r[o];o=o+1|0;var h=u[0],c=(e=null!=h&&"string"==typeof h?h:Wr(),n=u[1],new Uo(e,n));s.i(c)}return s}function Qa(){}function Ha(){return(t=(new Date).getTime())instanceof Gr?t:ls(t);var t}ms(Zo,"OneAtATimeAssembler",vs),ms(Xo,"AllAtOnceAssembler",vs),ms(ea,"SubscribeCallbackParams",vs),ms(ia,"Mode",vs,fr),ms(aa,"Callback",vs),ms(wa,Bn,vs),ms(ya,"DispatcherImpl",vs),ms(ka,"EmptyOptions",vs,Bn,Bn,ka),ms(qa,"DispatcherSnapshot",vs),ms(Ca,"EventScope",vs,fr),ms(La,"LocalEventsDeduper",vs),ms(Ra,"NoOpUnsubscriber",bs),ms(xa,"BaseTrace",vs),ms(Oa,"ErrorInfo",vs),ms(Ma,"PerformanceAnalyticsDelegate",gs),ms(Pa,"NoOpPerformanceAnalyticsDelegate",vs,Bn,[Ma],Pa),ms(Da,"RuntimeTrace",vs,xa),ms(Ua,"Disabled",bs),ms(Ba,"NiceLogger",vs),ms($a,"NoOpLogger",vs,Bn,Bn,$a),ms(Wa,"TimerDefinition",vs),ms(za,"Span",vs),ms(Va,"Tracer",bs),ms(Fa,"JsDispatcherImpl",vs,ya),ms(Ga,"JsRequestBuilderAdapter",vs),ms(Qa,"JsonStateOperations",vs,Bn,Bn,Qa),Nr(Zo).y6=function(t,e){var n;if(t.t())n=bo();else{for(var i=this.x6_1.list(),r=t.w5();ta(r);){for(var s=0,o=i.length;s<o;){var a=i[s];if(s=s+1|0,a.id===r.hook)return this.w6_1.a7([e+" building batch of ",r]),ni(r)}if(t.t())return bo();r=t.w5()}this.w6_1.a7([e+" building batch of ",r]),n=ni(r)}return n},Nr(Xo).y6=function(t,e){var n;if(t.t())n=bo();else{for(var i=this.c7_1.list(),r=_i(),s=t.l();s.m();){var o,a=s.o();if(ta(a)){var u;if(0===i.length)u=!1;else{var h;t:{for(var c=0,l=i.length;c<l;){var f=i[c];if(c=c+1|0,f.id===a.hook){h=f;break t}}h=null}u=!(null==h)}o=u}else o=!0;o&&r.i(a)}var d=r;t.z5(),this.b7_1.a7([e+" building batch of ",d]),n=d}return n},Nr(ea).d7=function(){return this.request},Nr(ea).e7=function(){return this.response},Nr(ea).f7=function(){return this.mode},Nr(ea).g7=function(){return this.request},Nr(ea).h7=function(){return this.response},Nr(ea).i7=function(){return this.mode},Nr(ea).j7=function(t,e,n){return new ea(t,e,n)},Nr(ea).copy=function(t,e,n,i){return t=t===Bn?this.request:t,e=e===Bn?this.response:e,n=n===Bn?this.mode:n,this.j7(t,e,n)},Nr(ea).toString=function(){return"SubscribeCallbackParams(request="+this.request+", response="+this.response+", mode="+this.mode+")"},Nr(ea).hashCode=function(){var t=null==this.request?0:Or(this.request);return t=Ko(t,31)+(null==this.response?0:Or(this.response))|0,t=Ko(t,31)+this.mode.hashCode()|0},Nr(ea).equals=function(t){if(this===t)return!0;if(!(t instanceof ea))return!1;var e=t instanceof ea?t:Wr();return!!Pr(this.request,e.request)&&(!!Pr(this.response,e.response)&&!!this.mode.equals(e.mode))},Nr(aa).toString=function(){return"Callback(success="+this.m7_1+", failure="+this.n7_1+")"},Nr(aa).hashCode=function(){var t=Or(this.m7_1);return t=Ko(t,31)+Or(this.n7_1)|0},Nr(aa).equals=function(t){if(this===t)return!0;if(!(t instanceof aa))return!1;var e=t instanceof aa?t:Wr();return!!Pr(this.m7_1,e.m7_1)&&!!Pr(this.n7_1,e.n7_1)},Nr(wa).unsubscribe=function(){this.p8_1.c8_1.j(this.q8_1)},Nr(ya).x8=function(t){this.o7_1=t},Nr(ya).y8=function(){return this.o7_1},Nr(ya).z8=function(){return this.x7_1},Nr(ya).a9=function(){return this.y7_1},Nr(ya).b9=function(){return this.z7_1},Nr(ya).init=function(t,e,n){var i,r,s,o;ga(this,bn,(i=this,r=t,s=e,o=n,function(){i.t7_1.a7(["Signpost: Initializing Dispatcher",r,s]),i.d8_1=r,i.e8_1=s,i.f8_1=o;var t,e=i;return t=i.s7_1.featureFlags.isUsingEverythingAssembler?new Xo(i.t7_1,o):new Zo(i.t7_1,o),e.w7_1=t,i.o8(),bn}))},Nr(ya).subscribe=function(t){var e,n;return ga(this,Qo,(e=t,n=this,function(){var t="function"==typeof e?e:Wr();return n.c8_1.i(t),new wa(n,t)}))},Nr(ya).o8=function(){if(this.t7_1.a7(["ticking","syncInFlight "+this.a8_1,"asyncQueue.size "+this.y7_1.r5_1,"syncQueue.size "+this.x7_1.r5_1,"speculativeQueue.size "+this.z7_1.r5_1]),!ha(this).isReady()&&!ca(this).isReady()&&(!this.x7_1.t()||!this.y7_1.t()))return this.t7_1.c9(["ticking with events and no runtime, deferring..."]),bn;if(this.a8_1){if(this.k8_1){va(this,ua(this).y6(this.z7_1,oa()),oa())}}else va(this,ua(this).y6(this.x7_1,ra()),ra());if(!this.y7_1.t()){for(;!this.y7_1.t();){va(this,ua(this).y6(this.y7_1,sa()),sa())}this.o8()}},Nr(ya).v8=function(t,e){if(t.t()||e.equals(oa()))return bn;this.t7_1.a7(["replaying "+t.q()+" events"]),ba(this,t);for(var n=Vi(),i=t.l();i.m();){var r,s=i.o(),o=new Uo(!0===s.async,!0===s.retry),a=n.r1(o);if(null==a){var u=_i();n.i1(o,u),r=u}else r=a;r.i(s)}var h=n,c=h.r1(new Uo(!0,!0));this.y7_1.y5(0,null==c?bo():c);var l=h.r1(new Uo(!0,!1));this.y7_1.p(null==l?bo():l);var f=h.r1(new Uo(!1,!0));this.x7_1.y5(0,null==f?bo():f);var d=h.r1(new Uo(!1,!1));this.x7_1.p(null==d?bo():d)},Nr(ya).submit=function(t){var e,n;ga(this,bn,(e=this,n=t,function(){e.t7_1.a7(ws([["Signpost: Submitted events"],n]));for(var t=e.v7_1.w8(Ki(n)).l();t.m();){var i=t.o();!0===i.async?e.y7_1.i(i):(e.x7_1.i(i),e.a8_1&&e.k8_1&&e.z7_1.i(i))}return e.o8(),bn}))},Nr(ya).reset=function(){var t;ga(this,bn,(t=this,function(){return ma(t,!0),bn}))},Nr(ya).snapshot=function(){return new qa(this.q7_1.clone(this.state),ii(this.x7_1),ii(this.y7_1),ha(this).snapshot(),ca(this).snapshot(),la(this).list())},Nr(ya).pause=function(){var t=this.snapshot();return la(this).pauseAll(),ma(this,!1),t},Nr(ya).resume=function(t){var e,n;ga(this,bn,(e=this,n=t,function(){e.state=e.q7_1.clone(n.state),e.y7_1.z5();var t=n.asyncQueue;qo(e.y7_1,qs(t)?t:Wr()),e.x7_1.z5();var i=n.syncQueue;return qo(e.x7_1,qs(i)?i:Wr()),da(e),ha(e).resume(n.localSnapshot),ca(e).resume(n.remoteSnapshot),la(e).resumeAll(n.timerSnapshot),bn}))},Nr(ka).h9=function(t){this.d9_1=t},Nr(ka).i9=function(){return this.d9_1},Nr(ka).j9=function(t){this.e9_1=t},Nr(ka).k9=function(){return this.e9_1},Nr(ka).l9=function(t){this.f9_1=t},Nr(ka).m9=function(){return this.f9_1},Nr(ka).n9=function(t){this.g9_1=t},Nr(ka).o9=function(){return this.g9_1},Nr(qa).y8=function(){return this.state},Nr(qa).z8=function(){return this.syncQueue},Nr(qa).a9=function(){return this.asyncQueue},Nr(qa).p9=function(){return this.localSnapshot},Nr(qa).q9=function(){return this.remoteSnapshot},Nr(qa).r9=function(){return this.timerSnapshot},Nr(qa).g7=function(){return this.state},Nr(qa).h7=function(){return this.syncQueue},Nr(qa).i7=function(){return this.asyncQueue},Nr(qa).s9=function(){return this.localSnapshot},Nr(qa).t9=function(){return this.remoteSnapshot},Nr(qa).u9=function(){return this.timerSnapshot},Nr(qa).v9=function(t,e,n,i,r,s){return new qa(t,e,n,i,r,s)},Nr(qa).copy=function(t,e,n,i,r,s,o){return t=t===Bn?this.state:t,e=e===Bn?this.syncQueue:e,n=n===Bn?this.asyncQueue:n,i=i===Bn?this.localSnapshot:i,r=r===Bn?this.remoteSnapshot:r,s=s===Bn?this.timerSnapshot:s,this.v9(t,e,n,i,r,s)},Nr(qa).toString=function(){return"DispatcherSnapshot(state="+this.state+", syncQueue="+xr(this.syncQueue)+", asyncQueue="+xr(this.asyncQueue)+", localSnapshot="+this.localSnapshot+", remoteSnapshot="+this.remoteSnapshot+", timerSnapshot="+this.timerSnapshot+")"},Nr(qa).hashCode=function(){var t=null==this.state?0:Or(this.state);return t=Ko(t,31)+Or(this.syncQueue)|0,t=Ko(t,31)+Or(this.asyncQueue)|0,t=Ko(t,31)+(null==this.localSnapshot?0:Or(this.localSnapshot))|0,t=Ko(t,31)+(null==this.remoteSnapshot?0:Or(this.remoteSnapshot))|0,t=Ko(t,31)+(null==this.timerSnapshot?0:Or(this.timerSnapshot))|0},Nr(qa).equals=function(t){if(this===t)return!0;if(!(t instanceof qa))return!1;var e=t instanceof qa?t:Wr();return!!Pr(this.state,e.state)&&(!!Pr(this.syncQueue,e.syncQueue)&&(!!Pr(this.asyncQueue,e.asyncQueue)&&(!!Pr(this.localSnapshot,e.localSnapshot)&&(!!Pr(this.remoteSnapshot,e.remoteSnapshot)&&!!Pr(this.timerSnapshot,e.timerSnapshot)))))},Nr(La).w8=function(t){var e;if(this.y9_1())e=t;else{for(var n=_i(),i=_i(),r=t.l();r.m();){var s=r.o();s.scope.equals(Ia())?i.i(s):n.i(s)}var o=new Uo(n,i);if(!o.v6_1.t()){var a=["Dropping "+o.v6_1.q()+" local events",o.v6_1];this.z9_1.a7([a])}e=o.u6_1}return e},Nr(Ra).unsubscribe=function(){},Nr(xa).aa=function(){return this.spanName},Nr(xa).ba=function(){return this.durationMs},Nr(Oa).l5=function(){return this.message},Nr(Oa).ca=function(){return this.origin},Nr(Oa).da=function(){return this.version},Nr(Pa).logRuntimeTrace=function(t){},Nr(Pa).logRuntimeError=function(t){},Nr(Da).fa=function(){return this.intent},Nr(Da).ga=function(){return this.target},Nr(Da).ha=function(){return this.eventCount},Nr(Ua).la=function(){return this.ia_1},Nr(Ua).ma=function(){return this.ja_1},Nr(Ua).na=function(){return this.ka_1},Nr(Ba).n8=function(t){var e=ws([[this.z6_1.tag()],t]);this.z6_1.error(e)},Nr(Ba).c9=function(t){var e=ws([[this.z6_1.tag()],t]);this.z6_1.warn(e)},Nr(Ba).a7=function(t){var e=ws([[this.z6_1.tag()],t]);this.z6_1.debug(e)},Nr($a).info=function(t){},Nr($a).error=function(t){},Nr($a).warn=function(t){},Nr($a).debug=function(t){},Nr($a).tag=function(){return""},Nr(Wa).oa=function(){return this.id},Nr(Wa).pa=function(){return this.duration},Nr(Wa).g7=function(){return this.id},Nr(Wa).h7=function(){return this.duration},Nr(Wa).qa=function(t,e){return new Wa(t,e)},Nr(Wa).copy=function(t,e,n){return t=t===Bn?this.id:t,e=e===Bn?this.duration:e,this.qa(t,e)},Nr(Wa).toString=function(){return"TimerDefinition(id="+this.id+", duration="+this.duration+")"},Nr(Wa).hashCode=function(){var t=Mr(this.id);return t=Ko(t,31)+this.duration|0},Nr(Wa).equals=function(t){if(this===t)return!0;if(!(t instanceof Wa))return!1;var e=t instanceof Wa?t:Wr();return this.id===e.id&&this.duration===e.duration},Nr(za).u8=function(){this.t8_1=Ha()},Nr(za).ea=function(){return this.t8_1.g5(this.s8_1)},Nr(Va).m8=function(t){return new za(t,Ha())},Nr(Ga).rb=function(t,e){var n=ii(e);return this.qb_1.build(t,n)},Nr(Ga).l8=function(t,e){return this.rb(null!=t&&null!=t?t:Wr(),e)},Nr(Qa).clone=function(t){return JSON.parse(JSON.stringify(t))},Nr(Qa).merge=function(t,e){for(var n={},i=null!=n&&null!=n?n:Wr(),r=Ja(t).l();r.m();){var s=r.o();i[s.u6_1]=s.v6_1}for(var o=Ja(e).l();o.m();){var a=o.o();i[a.u6_1]=a.v6_1}return i},Dr(Nr(ia),"name",Nr(ia).r4),Dr(Nr(ia),"ordinal",Nr(ia).s4),Dr(Nr(ya),"state",(function(){return this.y8()}),(function(t){this.x8(t)})),Dr(Nr(ka),"logger",(function(){return this.i9()}),(function(t){this.h9(t)})),Dr(Nr(ka),"errorHandler",(function(){return this.k9()}),(function(t){this.j9(t)})),Dr(Nr(ka),"featureFlags",(function(){return this.m9()}),(function(t){this.l9(t)})),Dr(Nr(ka),"performanceAnalyticsDelegate",(function(){return this.o9()}),(function(t){this.n9(t)})),Dr(Nr(Ca),"name",Nr(Ca).r4),Dr(Nr(Ca),"ordinal",Nr(Ca).s4),Dr(Nr(Ua),"isSpeculativeExecutionEnabled",(function(){return this.la()})),Dr(Nr(Ua),"isVerboseLoggingEnabled",(function(){return this.ma()})),Dr(Nr(Ua),"isUsingEverythingAssembler",(function(){return this.na()})),Dr(Nr(Fa),"state",(function(){return this.y8()}),(function(t){this.x8(t)})),Qo=new Ra,Ho=new Ua,Yo=new Va,ia.values=function(){return[ra(),sa(),oa()]},ia.valueOf=function(t){switch(t){case"SYNC":return ra();case"ASYNC":return sa();case"SPEC":return oa();default:na(),Vr("No enum constant value.")}},Dr(ia,"SYNC",ra),Dr(ia,"ASYNC",sa),Dr(ia,"SPEC",oa),Ca.values=function(){return[Aa(),Ia(),Ta()]},Ca.valueOf=function(t){switch(t){case"ALL":return Aa();case"LOCAL":return Ia();case"REMOTE":return Ta();default:Sa(),Vr("No enum constant value.")}},Dr(Ca,"ALL",Aa),Dr(Ca,"LOCAL",Ia),Dr(Ca,"REMOTE",Ta);class Ya{constructor(t){this.scope=t.scope?(t=>{switch(t){case h.ALL:return Ca.ALL;case h.REMOTE:return Ca.REMOTE;case h.LOCAL:return Ca.LOCAL;case h.UNRECOGNIZED:return Ca.ALL;default:throw new Error(`Unknown UIEventScope: ${t}`)}})(t.scope):Ca.ALL,this.async=t.async,this.hook=t.hook,this.retry=t.retry,this.uiEvent=t}}class Ka{constructor(t){this.uiRequest=t,this.events=t.events.map((t=>new Ya(t))),t.state&&(this.state=t.state)}}class Za{constructor(t){this.uiResponse=t,this.replay=t.events.map((t=>new Ya(t))),t.state&&(this.state=t.state)}}var Xa,tu,eu,nu,iu,ru=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},su=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const ou=new Set(["RenderPostContent"]);function au(t){if(ou.has(t.split("/").at(-1)))return t;throw Error(`Unsupported RPC ${t}`)}class uu{constructor(t){Xa.set(this,void 0),tu.set(this,void 0),ru(this,Xa,t,"f")}set env(t){ru(this,Xa,t,"f")}set props(t){ru(this,tu,t,"f")}build(t,e){return new Ka({state:t,events:e.map((t=>t.uiEvent)),env:su(this,Xa,"f"),props:su(this,tu,"f")})}}Xa=new WeakMap,tu=new WeakMap;class hu{constructor(){eu.set(this,void 0),nu.set(this,!1),iu.set(this,((t,e,n,i,r)=>{this.onPluginCall?.(t,e,n,i,r),e===a.fullName&&n===a.methods.send.name&&su(this,eu,"f")?.onPluginResponse(t,{error:void 0,success:!0,value:{}})}))}isReady(){return!!su(this,eu,"f")?.ready}set runtimeDebugLogging(t){ru(this,nu,t,"f"),su(this,eu,"f")&&(su(this,eu,"f").runtimeDebugLogging=t)}setLocalSrc(t){this.unload(),ru(this,eu,t?new Vt(t,((t,e)=>console.error(t,e)),{callback:su(this,iu,"f"),plugins:[]}):void 0,"f"),su(this,eu,"f")&&(su(this,eu,"f").runtimeDebugLogging=su(this,nu,"f"))}unload(){su(this,eu,"f")?.quit()}async load(t){this.unload();try{return await(su(this,eu,"f")?.loadBundle(t))}catch(t){console.error(t)}}handle(t,e,n,i){if(!this.isReady()||!su(this,eu,"f"))throw new Error("local runtime handle called before isReady");devvit?.debug.runtime&&console.debug("[runtime] Local request",e,this.metadata),su(this,eu,"f")?.call(au(t),e.uiRequest,this.metadata).then((t=>n(new Za(t)))).catch((t=>i(t)))}pause(){}reset(){}resume(){}snapshot(){return{}}}eu=new WeakMap,nu=new WeakMap,iu=new WeakMap;class cu{isReady(){return!!this.remote}load(t){this.remote=t}handle(t,e,n,i){if(!this.isReady()||!this.remote)throw new Error("remote runtime called remote before isReady()");this.remote[au(t)](e.uiRequest,this.metadata).then((t=>n(new Za(t)))).catch(i)}pause(){}reset(){}resume(){}snapshot(){return{}}}var lu,fu,du,pu=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},vu=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class _u{constructor(t){lu.set(this,new Map),fu.set(this,new Map),du.set(this,void 0),devvit?.debug.runtime&&console.debug("[runtime] timers: constructor"),pu(this,du,t,"f")}add(t){devvit?.debug.runtime&&console.debug("[runtime] timers: add",t),vu(this,fu,"f").set(t.id,t),vu(this,lu,"f").set(t.id,window.setInterval((()=>{vu(this,du,"f").submit([new Ya({scope:h.ALL,timer:{},hook:t.id})])}),t.duration))}apply(t){devvit?.debug.runtime&&console.debug("[runtime] timers: apply",t);const e=new Map(vu(this,fu,"f"));t.forEach((t=>{e.delete(t.id),vu(this,fu,"f").has(t.id)||(devvit?.debug.runtime&&console.debug("[runtime] timers: apply - adding definition",t),this.add(t))})),devvit?.debug.runtime&&console.debug("[runtime] timers: apply - removing the following definitions",e);for(const[t]of e)this.remove(t)}clear(){devvit?.debug.runtime&&console.debug("[runtime] timers: clear");for(const t of vu(this,lu,"f").values())clearInterval(t);vu(this,lu,"f").clear(),vu(this,fu,"f").clear()}list(){return devvit?.debug.runtime&&console.debug("[runtime] timers: list"),[...vu(this,fu,"f").values()]}pauseAll(){devvit?.debug.runtime&&console.debug("[runtime] timers: pauseAll");for(const t of vu(this,lu,"f").values())clearInterval(t);return this.list()}remove(t){devvit?.debug.runtime&&console.debug("[runtime] timers: remove"),vu(this,fu,"f").delete(t),clearInterval(vu(this,lu,"f").get(t)),vu(this,lu,"f").delete(t)}resumeAll(t){devvit?.debug.runtime&&console.debug("[runtime] timers: resumeAll"),this.apply(t)}}lu=new WeakMap,fu=new WeakMap,du=new WeakMap;var mu,gu,bu,wu,yu,Eu,ku,qu=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},Su=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};const Cu=t=>"ServerCallRequired"===t.message;class Au{debug(t){devvit?.debug.runtime&&console.debug(this.tag(),...t)}error(t){Cu(t[0])||console.error(this.tag(),...t)}info(t){console.info(this.tag(),...t)}warn(t){console.warn(this.tag(),...t)}tag(){return"[kmp-dispatcher]"}}class Iu{constructor(){this.__doNotUseOrImplementIt={"net.devvit.analytics.PerformanceAnalyticsDelegate":Symbol("net.devvit.analytics.PerformanceAnalyticsDelegate")}}logRuntimeError(t){Cu(t)||console.error("[kmp-dispatcher-perf-analytics] error",t)}logRuntimeTrace(t){devvit?.debug.runtime&&console.debug("[kmp-dispatcher-perf-analytics]",t)}}Le();const Tu=["showToast","showForm","navigateToUrl","createOrder"];class Lu{get state(){return qu(this,bu,"f").state}constructor(t,e,n){mu.set(this,void 0),gu.set(this,void 0),bu.set(this,void 0),wu.set(this,void 0),this.hasRendered=!1,yu.set(this,void 0),Eu.set(this,void 0),ku.set(this,void 0),Su(this,mu,new uu(e),"f"),n.useSpeculativeExecution&&devvit?.debug.runtime&&console.debug("[webDispatcher] Using speculative execution mode!"),Su(this,bu,new Fa(t??{},qu(this,mu,"f"),"RenderPostContent",{logger:new Au,featureFlags:{isSpeculativeExecutionEnabled:n.useSpeculativeExecution,isUsingEverythingAssembler:!1,isVerboseLoggingEnabled:!!devvit?.debug.runtime},performanceAnalyticsDelegate:new Iu,errorHandler:t=>this.onError?.(t)}),"f"),Su(this,gu,new _u(qu(this,bu,"f")),"f"),Su(this,yu,new cu,"f"),Su(this,Eu,new hu,"f"),this.init()}set metadata(t){const e={...t},n=[];for(const[t,e]of Object.entries(devvit?.debug??{}))n.push(`${t}=${e}`);n.length&&(e[b.Debug]={values:n}),qu(this,Eu,"f").metadata=e,qu(this,yu,"f").metadata=e}set onPluginCall(t){qu(this,Eu,"f").onPluginCall=t}set runtimeDebugLogging(t){qu(this,Eu,"f").runtimeDebugLogging=t}subscribe(t){Su(this,wu,qu(this,bu,"f").subscribe(((...e)=>{devvit?.debug.runtime&&console.debug("[runtime] dispatcher got a new event from subscribe",e[0]);const[{response:n}]=e;n.uiResponse.effects.forEach((t=>{if(Tu.some((e=>t[e]))||t.realtimeSubscriptions)this.onUserAction?.(t);else{if(t.interval){const e=Object.entries(t.interval.intervals);return 0===e.length&&qu(this,gu,"f").clear(),void qu(this,gu,"f").apply(e.map((([t,e])=>new Wa(t,(({nanos:t,seconds:e})=>{const n=1e3*e,i=t/1e6;return Math.floor(n+i)})(e.duration)))))}console.warn(`Received an effect that is not implemented! Please add an effect handler to the web dispatcher. Effect: ${JSON.stringify(t,null,2)}`)}})),t(...e)})),"f")}submit(...t){qu(this,bu,"f").submit(...t)}unsubscribe(){qu(this,wu,"f")?.unsubscribe()}init(){qu(this,bu,"f").init(qu(this,Eu,"f"),qu(this,yu,"f"),qu(this,gu,"f"))}togglePause(t){t?Su(this,ku,qu(this,bu,"f").pause(),"f"):qu(this,ku,"f")&&qu(this,bu,"f").resume(qu(this,ku,"f"))}resetAppState(){this.hasRendered=!1,qu(this,bu,"f").reset()}setEnv(t){qu(this,mu,"f").env=t}setProps(t){qu(this,mu,"f").props=t}remoteLoad(...t){qu(this,yu,"f").load(...t)}async localLoad(...t){return qu(this,Eu,"f").reset(),await qu(this,Eu,"f").load(...t)}localLoadWorker(...t){qu(this,Eu,"f").setLocalSrc(...t)}}mu=new WeakMap,gu=new WeakMap,bu=new WeakMap,wu=new WeakMap,yu=new WeakMap,Eu=new WeakMap,ku=new WeakMap;var Ru,xu,Ou,Mu,Pu,ju,Nu,Du,Uu,Bu,$u,Wu,zu=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Vu=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Fu=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},Gu=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};let Ju=class extends t{static get styles(){return[c]}constructor(){super(),Ru.add(this),this.runtimeDebugLogging=!1,this.useExperimentalBlocks=!1,this.useSpeculativeExecution=!1,this.webviewUrlTemplate="",this.disableAssetSandbox=!1,xu.set(this,void 0),Ou.set(this,void 0),Mu.set(this,void 0),Pu.set(this,""),ju.set(this,void 0),Nu.set(this,(()=>({experimental:this.useExperimentalBlocks,resolveWebviewUrl:t=>this.disableAssetSandbox?t:Ze(this.webviewUrlTemplate,this.metadata?.[b.Subreddit]?.values?.[0],Fu(this,Pu,"f"),t),onAction:t=>Fu(this,ju,"f")?.submit([new Ya({scope:h.ALL,userAction:{actionId:t.id,data:t.data??{}},hook:t.id})]),stackDirection:l.UNRECOGNIZED,disableAssetSandbox:this.disableAssetSandbox}))),Du.set(this,(t=>{Q(t)||console.error(t),Fu(this,Ru,"m",$u).call(this,"devvit-ui-error",{err:t,type:"Error"})})),Uu.set(this,((t,e,n,i,r)=>{e===a.fullName&&n===a.methods.send.name&&Fu(this,Ru,"m",$u).call(this,"devvit-realtime-send",{event:i})})),Bu.set(this,(({response:t})=>{var e,n;this.renderResponse=t,t?.blocks&&(this._rootBlock=t.blocks,Fu(this,xu,"f")?((e=this._rootBlock).config??(e.config={}),(n=this._rootBlock.config).rootConfig??(n.rootConfig=f.fromPartial({})),this._rootBlock.config.rootConfig.height=Fu(this,xu,"f")):Gu(this,xu,this._rootBlock.config?.rootConfig?.height||z,"f"))})),Wu.set(this,(t=>{Fu(this,Ru,"m",$u).call(this,"devvit-ui-effect",{effect:t,onEvent:t=>Fu(this,ju,"f")?.submit([new Ya(t)]),metadata:this.metadata})})),devvit?.debug.surface&&console.debug("[surface] Using devvit-surface and KMP!")}async connectedCallback(){super.connectedCallback(),Gu(this,ju,new Lu({},{colorScheme:this.scheme,dimensions:this.dimensions,locale:this.metadata?.[b.Language]?.values?.[0],timezone:this.metadata?.[b.Timezone]?.values?.[0]},{useSpeculativeExecution:this.useSpeculativeExecution}),"f"),Fu(this,ju,"f").onPluginCall=Fu(this,Uu,"f"),Fu(this,ju,"f").onError=Fu(this,Du,"f"),Fu(this,ju,"f").onUserAction=Fu(this,Wu,"f"),Fu(this,ju,"f").subscribe((t=>{Fu(this,Bu,"f").call(this,{request:t.request.uiRequest,response:t.response.uiResponse})})),Gu(this,Ou,new ResizeObserver(H((t=>{0!==t.length&&(this.dimensions=X(t[0],window,document.body))}),600)),"f"),Fu(this,Ou,"f").observe(this,{box:"content-box"}),Gu(this,Mu,new IntersectionObserver((t=>{t.forEach((t=>{Fu(this,ju,"f")?.togglePause(!t.isIntersecting)}))})),"f"),Fu(this,Mu,"f").observe(this)}disconnectedCallback(){Fu(this,Ou,"f")?.unobserve(this),Fu(this,Ou,"f")?.disconnect(),Fu(this,Mu,"f")?.unobserve(this),Fu(this,Mu,"f")?.disconnect(),Fu(this,ju,"f")?.unsubscribe(),super.disconnectedCallback()}render(){return this.renderResponse?e`<div class="relative"> <devvit-blocks-renderer class="${this.scheme??""}" .block="${this._rootBlock}" .renderContext="${Fu(this,Nu,"f")}"> <slot slot="empty-state-image" name="empty-state-image"></slot> </devvit-blocks-renderer> </div>`:e`<slot></slot>`}async willUpdate(t){if(Fu(this,ju,"f")){if(Fu(this,ju,"f").setEnv({colorScheme:this.scheme,dimensions:this.dimensions,locale:this.metadata?.[b.Language]?.values?.[0],timezone:this.metadata?.[b.Timezone]?.values?.[0]}),Fu(this,ju,"f").setProps({...this.requestProps,postId:this.requestProps?.postId?Z(this.requestProps.postId):void 0}),Fu(this,ju,"f").runtimeDebugLogging=this.runtimeDebugLogging,Fu(this,ju,"f").metadata=this.metadata,t.has("remoteApp")&&(devvit?.debug.surface&&console.debug("[surface] remoteApp "+(this.remoteApp?"defined":"undefined")),Fu(this,ju,"f").remoteLoad(this.remoteApp)),t.has("localRuntimeCode")&&(devvit?.debug.surface&&console.debug("[surface] local runtime "+(this.localRuntimeCode?"loading":"unloading")),Fu(this,ju,"f").localLoadWorker(this.localRuntimeCode)),t.has("bundle")&&this.bundle){devvit?.debug.surface&&console.debug("[surface] bundle loading");const e=await Fu(this,ju,"f").localLoad(this.bundle);e&&Fu(this,Ru,"m",$u).call(this,"devvit-loaded",e),devvit?.debug.surface&&console.debug("[surface] bundle loaded"),Gu(this,Pu,this.bundle.actor?.version??"","f"),t.get("bundle")&&(devvit?.debug.surface&&console.debug("[runtime][surface] reset runtime state"),Gu(this,xu,void 0,"f"),this.renderResponse=void 0,Fu(this,ju,"f").resetAppState())}this.dimensions&&(!Fu(this,ju,"f").hasRendered||t.has("bundle")?(Fu(this,ju,"f").hasRendered=!0,Fu(this,ju,"f").submit([new Ya({scope:h.ALL,blocking:{}})])):t.has("dimensions")&&Fu(this,ju,"f").submit([new Ya({scope:h.ALL,resize:{}})]))}}};xu=new WeakMap,Ou=new WeakMap,Mu=new WeakMap,Pu=new WeakMap,ju=new WeakMap,Nu=new WeakMap,Du=new WeakMap,Uu=new WeakMap,Bu=new WeakMap,Wu=new WeakMap,Ru=new WeakSet,$u=function(t,e){this.dispatchEvent(L(t,e))},zu([C({attribute:!1}),Vu("design:type",Object)],Ju.prototype,"remoteApp",void 0),zu([C({attribute:!1}),Vu("design:type",Object)],Ju.prototype,"bundle",void 0),zu([C({attribute:!1}),Vu("design:type",Object)],Ju.prototype,"localRuntimeCode",void 0),zu([C({attribute:!1}),Vu("design:type",Object)],Ju.prototype,"metadata",void 0),zu([C({attribute:"requestProps",type:Object}),Vu("design:type",Object)],Ju.prototype,"requestProps",void 0),zu([C({attribute:"runtime-debug-logging",type:Boolean}),Vu("design:type",Boolean)],Ju.prototype,"runtimeDebugLogging",void 0),zu([C({attribute:"scheme"}),Vu("design:type",Object)],Ju.prototype,"scheme",void 0),zu([C({attribute:"use-experimental-blocks",type:Boolean}),Vu("design:type",Boolean)],Ju.prototype,"useExperimentalBlocks",void 0),zu([C({attribute:"use-speculative-execution",type:Boolean}),Vu("design:type",Boolean)],Ju.prototype,"useSpeculativeExecution",void 0),zu([C({type:String}),Vu("design:type",String)],Ju.prototype,"webviewUrlTemplate",void 0),zu([C({attribute:"disable-asset-sandbox",type:Boolean}),Vu("design:type",Boolean)],Ju.prototype,"disableAssetSandbox",void 0),zu([A(),Vu("design:type",Object)],Ju.prototype,"dimensions",void 0),zu([A(),Vu("design:type",Object)],Ju.prototype,"_rootBlock",void 0),Ju=zu([T("devvit-surface"),Vu("design:paramtypes",[])],Ju);var Qu,Hu,Yu,Ku=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};Le();class Zu extends w{constructor(){super(...arguments),Qu.add(this),this._channels=Object.create(null),this._onSendEv=t=>{const{channel:e,data:n}=t.detail.event;if(devvit?.debug.realtime&&console.log(`[realtime] ${e} sends`,n),!(e in this._channels))throw Error(`realtime ${e} subscription required to send`);this.onSendSock(e,n).catch((t=>{console.error("[realtime] onSendSock() failed:",t)}))}}hostConnected(){super.hostConnected(),devvit?.debug.realtime&&console.log("[realtime] host connected"),this.host.addEventListener("devvit-realtime-send",this._onSendEv);for(const t in this._channels)"Disconnected"===this._channels[t]&&Ku(this,Qu,"m",Hu).call(this,t,void 0)}hostDisconnected(){super.hostDisconnected(),devvit?.debug.realtime&&console.log("[realtime] host disconnected");for(const t in this._channels)"Connected"===this._channels[t]&&Ku(this,Qu,"m",Yu).call(this,t,void 0);this.host.removeEventListener("devvit-realtime-send",this._onSendEv)}onEvent(t){if(!t.detail.effect.realtimeSubscriptions)return;if(t.detail.effect.type!==d.EFFECT_REALTIME_SUB)return;const e=new Set(t.detail.effect.realtimeSubscriptions.subscriptionIds);for(const n of e)this._channels[n]||Ku(this,Qu,"m",Hu).call(this,n,t.detail.onEvent);for(const n in this._channels)e.has(n)||("Connected"===this._channels[n]&&Ku(this,Qu,"m",Yu).call(this,n,t.detail.onEvent),"Disconnected"===this._channels[n]&&(this.onFreeSock(n),delete this._channels[n]))}}Qu=new WeakSet,Hu=function(t,e){devvit?.debug.realtime&&console.log(`[realtime] ${t} connected`),this._channels[t]="Connected",e?.({scope:h.ALL,hook:th(t),realtimeEvent:{event:{channel:t},status:p.REALTIME_SUBSCRIBED}});let n=e;devvit?.debug.realtime&&(n=n=>{console.log(`[realtime] ${t} receives`,n.realtimeEvent?.event?.data),e?.(n)}),this.onConnectSock(t,n)},Yu=function(t,e){devvit?.debug.realtime&&console.log(`[realtime] ${t} disconnected`),this.onDisconnectSock(t),e?.({scope:h.ALL,hook:th(t),realtimeEvent:{event:{channel:t},status:p.REALTIME_UNSUBSCRIBED}}),this._channels[t]="Disconnected"};class Xu extends w{constructor(t){super(t),devvit?.debug.realtime&&console.log("[realtime] disabled")}onEvent(t){if(t.detail.effect.realtimeSubscriptions&&t.detail.effect.type===d.EFFECT_REALTIME_SUB)throw Error("realtime permission required to un/subscribe")}}function th(t){return`useChannel:${t.replace(/^.+:/,"")}`}function eh(t){window.Sentry?.captureMessage?.(t)}class nh extends Zu{constructor(){super(...arguments),this._connections={}}onConnectSock(t,e){var n;(n=this._connections)[t]??(n[t]=new R(this.host)),this._connections[t].subscribe(((t,e)=>({query:{operationName:"SubscribeSubscription",query:"\n        subscription SubscribeSubscription($input: SubscribeInput!) {\n          subscribe(input: $input) {\n            id\n            ... on BasicMessage {\n              data {\n                ... on DevPlatformAppMessageData {\n                  payload\n                }\n              }\n            }\n          }\n        }\n      ",variables:{input:{channel:{teamOwner:"DEV_PLATFORM",category:"DEV_PLATFORM_APP_EVENTS",tag:t}}}},onData:n=>{n.data&&e?.({hook:th(t),realtimeEvent:{event:{data:n.data.subscribe.data.payload,channel:t}},scope:h.LOCAL})},reconnectOnClose:!0}))(t,e))}onDisconnectSock(t){this._connections[t].unsubscribe()}onFreeSock(t){delete this._connections[t]}async onSendSock(t,e){await(async t=>{try{const e=await x();if(!e){const t="Failed to fetch auth token from /svc/shreddit/token";throw eh(t),new Error(t)}const n=await fetch("https://gql-realtime.reddit.com/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(t)});if(!n.ok){const t=await n.text();throw eh(`GQL realtime mutation failed with status ${n.status}: ${t}`),new Error(t)}return n.json()}catch(t){throw eh(`Failed to send realtime event: ${t}`),t}})({query:"\n        mutation publish($input: PublishInput!) {\n          publish(input: $input) {\n            ok\n          }\n        }\n      ",variables:{input:{channel:{teamOwner:"DEV_PLATFORM",category:"DEV_PLATFORM_APP_EVENTS",tag:t},DevPlatformAppMessageData:{payload:e}}}})}}var ih;const rh=O(M(t));let sh=ih=class extends rh{constructor(){super(...arguments),this.suspendOffScreen=!1,this.isUserLoggedIn=!1,this.useUIRequest=!1,this.useExperimentalBlocks=!1,this.useExperimentalRealtime=!1,this.useSpeculativeExecution=!1,this.theme=G.System,this.cached="",this._effectHandler=new Xu(this),this.subredditName="",this.webviewUrlTemplate="",this._abortController=new AbortController,this._metadata={},this.handleLoggedOutUserClick=()=>{this.dispatchEvent(L(D[U]))},this.handleResize=t=>{for(const e of t)this.sendCustomPostDimensions(e.contentRect.height,e.contentRect.width)},this.onThemeChange=t=>{const e=t.detail;e&&void 0!==e.isDarkMode&&(this.theme=e.isDarkMode?G.Darkmode:G.Lightmode)}}static _isInIframe(){return globalThis.self!==globalThis.top}static _isTargetOriginValid(t){return V.includes(t)||t.endsWith(".snoo.dev")}async captureSafetyReport(){if(this.useUIRequest){const t=await this._devvitSurfaceEl;return t?.renderResponse?.blocks?v(_.encode(t.renderResponse.blocks).finish()):this.cached}const t=await this._devvitCustomPostEl;return t?.renderResponse?.blocks?.ui?v(_.encode(t.renderResponse.blocks.ui).finish()):this.cached}connectedCallback(){super.connectedCallback(),this.bundle&&(this.suspendOffScreen?ih._isInIframe()||this.enableObserver():this.startCustomPost(),ih._isInIframe()&&(this._resizeObserver=new ResizeObserver(this.handleResize),this._resizeObserver.observe(this)),this._effectHandler.hostDisconnected(),this.removeController(this._effectHandler),this._effectHandler=this.useExperimentalRealtime?new nh(this):new Xu(this),document.documentElement.addEventListener("community-colors-change",this.onThemeChange))}willUpdate(){this._fullBundle?this._metadata=y(this._fullBundle.hostname,this.subredditId,this.subredditName,this.userId,this.postId,this.postAuthorId,this._fullBundle.actor?.version):this.bundle&&(this._metadata=y(this.bundle.hostname,this.subredditId,this.subredditName,this.userId,this.postId,this.postAuthorId))}async sendCustomPostDimensions(t,e){if(window?.top&&t&&e&&(!this._postDimensions||t!==this._postDimensions.height)){const n=document.referrer.replace(/\/$/,"");ih._isTargetOriginValid(n)&&window.top.postMessage({loadState:"loaded",height:t,width:e,postId:this.postId},n),this._postDimensions={height:t,width:e}}}disconnectedCallback(){super.disconnectedCallback(),this.removeController(this._effectHandler),this.suspendCustomPost(),this.disableObserver(),document.documentElement.removeEventListener("community-colors-change",this.onThemeChange)}suspendCustomPost(){this._abortController&&this._abortController.abort(),this._remoteApp=void 0,this._fullBundle=void 0}async startCustomPost(){this._remoteApp||(this._remoteApp=E(this.bundle.hostname),this._abortController=new AbortController,this._fullBundle=await k(this.bundle.hostname,this._abortController))}observerIsIntersectingCallback(){this.bundle&&this.startCustomPost()}render(){if(!this._remoteApp)return e`<slot></slot>`;const t=(n=this.theme)===G.Darkmode?"dark":n===G.Lightmode?"light":"";var n;return this.useUIRequest?e`\n <div class="relative">\n <devvit-surface \n class="block" \n ?allow-webview="${Object.keys(this._fullBundle?.webviewAssets??{}).length>0}" \n .remoteApp="${this._remoteApp}" \n .requestProps="${{postId:this.postId}}" \n .localRuntimeCode="${q}" \n .bundle="${this._fullBundle}" \n .metadata="${this._metadata}" \n .useExperimentalBlocks="${this.useExperimentalBlocks}" \n .scheme="${t||void 0}" \n .webviewUrlTemplate="${this.webviewUrlTemplate}" \n>\n <slot></slot>\n </devvit-surface>\n ${this.isUserLoggedIn?e``:e`<button \n @click="${this.handleLoggedOutUserClick}" \n class="absolute top-0 left-0 w-full h-full bg-transparent border-none cursor-pointer" \n></button>`}\n </div>\n `:e`\n <div class="relative">\n <devvit-custom-post \n class="block" \n ?allow-webview="${Object.keys(this._fullBundle?.webviewAssets??{}).length>0}" \n .remoteApp="${this._remoteApp}" \n .postId="${this.postId}" \n .localRuntimeCode="${q}" \n .bundle="${this._fullBundle}" \n .metadata="${this._metadata}" \n .postConfig="${this.settings?.fields}" \n .useExperimentalBlocks="${this.useExperimentalBlocks}" \n .scheme="${t||void 0}" \n .webviewUrlTemplate="${this.webviewUrlTemplate}" \n>\n <slot></slot>\n </devvit-custom-post>\n ${this.isUserLoggedIn?e``:e`<button \n @click="${this.handleLoggedOutUserClick}" \n class="absolute top-0 left-0 w-full h-full bg-transparent border-none cursor-pointer" \n></button>`}\n </div>\n `}};sh.styles=[n``,P],j([A()],sh.prototype,"_remoteApp",void 0),j([A()],sh.prototype,"_fullBundle",void 0),j([A()],sh.prototype,"_postDimensions",void 0),j([C({type:Boolean,attribute:"suspend-off-screen"})],sh.prototype,"suspendOffScreen",void 0),j([C({type:Boolean,attribute:"user-logged-in"})],sh.prototype,"isUserLoggedIn",void 0),j([C({attribute:"use-ui-request",type:Boolean})],sh.prototype,"useUIRequest",void 0),j([C({type:Boolean})],sh.prototype,"useExperimentalBlocks",void 0),j([C({type:Boolean})],sh.prototype,"useExperimentalRealtime",void 0),j([C({type:Boolean})],sh.prototype,"useSpeculativeExecution",void 0),j([C({type:String})],sh.prototype,"theme",void 0),j([C({type:String})],sh.prototype,"cached",void 0),j([C({converter:{fromAttribute:t=>S.decode(m(t))}})],sh.prototype,"bundle",void 0),j([C({converter:{fromAttribute:t=>g.decode(m(t))}})],sh.prototype,"settings",void 0),j([C({type:String})],sh.prototype,"postId",void 0),j([C({type:String})],sh.prototype,"postAuthorId",void 0),j([C({type:String})],sh.prototype,"userId",void 0),j([C({type:String})],sh.prototype,"subredditId",void 0),j([C({type:String})],sh.prototype,"subredditName",void 0),j([C({type:String})],sh.prototype,"webviewUrlTemplate",void 0),j([N("devvit-custom-post")],sh.prototype,"_devvitCustomPostEl",void 0),j([N("devvit-surface")],sh.prototype,"_devvitSurfaceEl",void 0),sh=ih=j([T("shreddit-devvit-ui-loader")],sh);let oh=class extends(O(t)){constructor(){super(),this._isInViewport=!1,this._consumed=!1,this._viewed=!1,this.postId="",this.subredditId="",this.appId="",this.appSlug="",this.isWatermarkEnabled=!1,this.handleIntersectionObserverLeave=()=>{this._isInViewport=!1,this._consumeTimer&&(window.clearTimeout(this._consumeTimer),this._consumeTimer=void 0)},this.handleViewAndConsumeV2Event=()=>{this._isInViewport=!0,this._viewed||(this._viewed=!0,this.onPostV2EventAction("view")),this.handleConsumeV2Event()},this.handleConsumeV2Event=()=>{this._consumeTimer||this._consumed||(this._consumeTimer=window.setTimeout((()=>{this._isInViewport&&!this._consumed&&(this._consumed=!0,this.onPostV2EventAction("consume"))}),2e3))},new B(this,this,{rootMargin:"0px"}),this.addEventListener("faceplate-enter",this.handleViewAndConsumeV2Event),this.addEventListener("faceplate-leave",this.handleIntersectionObserverLeave)}disconnectedCallback(){this.removeEventListener("faceplate-enter",this.handleViewAndConsumeV2Event),this.removeEventListener("faceplate-leave",this.handleIntersectionObserverLeave)}onPostV2EventAction(t){const e=$(F({postId:this.postId||"",subredditId:this.subredditId||"",blockType:"",pageType:this.pageType,action:t,noun:"custom_post",app_id:this.appId,app_slug:this.appSlug,user_agent:this.userAgent,watermark:this.isWatermarkEnabled?"v1":void 0}));this.trackEvent(e)}render(){return e`\n <div \n class="relative" \n data-test-id="devvit-post" \n @click="${()=>this.onPostV2EventAction("click")}" \n @keydown="${()=>this.onPostV2EventAction("click")}" \n>\n <slot></slot>\n </div>\n `}};oh.styles=[P],j([A()],oh.prototype,"_isInViewport",void 0),j([A()],oh.prototype,"_consumeTimer",void 0),j([A()],oh.prototype,"_consumed",void 0),j([A()],oh.prototype,"_viewed",void 0),j([C({type:String})],oh.prototype,"postId",void 0),j([C({type:String})],oh.prototype,"subredditId",void 0),j([C({type:String})],oh.prototype,"appId",void 0),j([C({type:String})],oh.prototype,"appSlug",void 0),j([C({type:String})],oh.prototype,"pageType",void 0),j([C({type:String})],oh.prototype,"userAgent",void 0),j([C({type:Boolean,attribute:"watermark-enabled"})],oh.prototype,"isWatermarkEnabled",void 0),oh=j([T("devvit-post-consume-tracker")],oh);
//# sourceMappingURL=devvit-ui-fragment-client-js-e0cbde89.js.map
