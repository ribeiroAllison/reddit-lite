import"./faceplate-switch-input-11d7e644.js";import{_ as e,n as t,e as s,ex as n,f5 as i,aF as a,aG as o,f6 as r,ey as l,f7 as c,f8 as d,f9 as h,fa as p,W as u,dK as y,r as m,q as b,a as f,dQ as v,t as k,dS as C}from"./shell-10899a6f.js";import{s as g,x as E}from"./icon-732d0443.js";import{u as x}from"./community-colors-69a398c4.js";import{D as w}from"./display-theme-810099b9.js";import{s as S}from"./translations-830bf5d1.js";import"./checked-input-element-9487863d.js";import"./faceplate-input-6d2f4135.js";import"./input-element-6687ec6f.js";import"./form-common-utils-0a9272bf.js";let j=class extends g{constructor(){super(...arguments),this.enabled=!1,this.country=""}handler(e){e.preventDefault(),n({country:this.country,name:i,value:this.enabled?"false":"true"}),window.location.reload()}render(){return E`<div @click="${this.handler}" @keypress="${this.handler}">\n <slot></slot>\n </div>`}};e([t({type:Boolean})],j.prototype,"enabled",void 0),e([t({type:String})],j.prototype,"country",void 0),j=e([s("shreddit-modmode-setter")],j);let T=class extends g{constructor(){super(...arguments),this.enabled=!1,this.country="",this.cookieDomain="",this.sync=!1}async connectedCallback(){super.connectedCallback(),this.sync&&this.syncCookieToUserPreference()}async syncCookieToUserPreference(){try{const{data:e}=await a({operation:o.IdentityUserPreferences,variables:{includeNightMode:!0}}),t=e.identity?.preferences?.isNightModeEnabled;if(null==t)return;t!==this.enabled&&(this.enabled=t,this.updateClientStyles(),this.setCookie(),this.reportMismatch())}catch{}}setCookie(){n({country:this.country,name:r,value:this.enabled?w.Darkmode:w.Lightmode,options:{...l,domain:this.cookieDomain||void 0}})}async setUserPreference(){await a({operation:o.UpdateAccountPreferences,variables:{input:{isNightModeEnabled:this.enabled}}})}updateClientStyles(){x({isDarkMode:this.enabled});const e=this.querySelector("faceplate-switch-input");e&&(e.checked=this.enabled)}reportMismatch(){const e=c(this.country)&&!d(),t={cookies_enabled:navigator.cookieEnabled&&!e?"true":"false"};h({type:p.Counter,name:"shreddit_darkmode_preference_mismatches",value:1,labels:t})}async handler(e){e.preventDefault(),this.enabled=!this.enabled,this.updateClientStyles(),this.setCookie(),await this.setUserPreference()}handleKeypress(e){"Enter"!==e.key&&"Space"!==e.key||this.handler(e)}render(){return E`<div @click="${this.handler}" @keypress="${this.handleKeypress}">\n <community-colors></community-colors>\n <slot></slot>\n </div>`}};e([t({type:Boolean,reflect:!0})],T.prototype,"enabled",void 0),e([t({type:String})],T.prototype,"country",void 0),e([t({type:String,attribute:"cookie-domain"})],T.prototype,"cookieDomain",void 0),e([t({type:Boolean})],T.prototype,"sync",void 0),T=e([s("shreddit-darkmode-setter")],T);let D=class extends(u(g)){constructor(){super(...arguments),this.translationContextValue=y,this.pubsub=new m(this)}updateTranslationSetting(e){const t=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:e}});this.dispatchEvent(t),this.pubsub.publish(b.I18nPostTranslationOverride,{isContextUpdateEvent:!0,isTranslationActive:e,id:""})}async handleEvent(e){e.preventDefault(),this.trackEvent(S({isImmersiveTranslationsActive:!this.translationContextValue.isTranslationActive})),this.updateTranslationSetting(!this.translationContextValue.isTranslationActive)}handleKeypress(e){"Enter"!==e.key&&"Space"!==e.key||this.handleEvent(e)}render(){return E`<div \n data-testid="translation-setting-click-setter-button" \n @click="${this.handleEvent}" \n @keypress="${this.handleKeypress}" \n class="flex justify-between items-center pr-md cursor-pointer hover:bg-neutral-background-hover" \n tabindex="0" \n role="button" \n arial-label="Configura\u00E7\u00E3o de tradu\u00E7\u00E3o" \n>\n <slot></slot>\n <faceplate-switch-input \n data-testid="translation-setting-click-setter-switch-input" \n class="m-0 [&_label]:hidden" \n ?checked="${!!this.translationContextValue.isTranslationActive}" \n name="translation-settings-list-input" \n></faceplate-switch-input>\n </div>`}};D.styles=[f],e([v({context:C,subscribe:!0}),k()],D.prototype,"translationContextValue",void 0),D=e([s("translation-setting-click-setter")],D);
//# sourceMappingURL=user-drawer-client-js-fbf48c53.js.map
