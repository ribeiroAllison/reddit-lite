import"./dsa-transparency-modal-2ef2b2b2.js";import{a as s,_ as t,n as a,w as e,t as r,r as i,ay as o,bO as n,a5 as d,q as p,e as c}from"./shell-10899a6f.js";import{s as l,x as h}from"./icon-732d0443.js";import"./faceplate-modal-af17da60.js";import"./faceplate-bottom-sheet-f113e7a5.js";import"./TinyGesture-b7fb4b5e.js";let y=class extends l{constructor(){super(),this.postId="",this.impressionId="",this.pubsub=new i(this),this._activateFeature=async s=>o(s),this.initDsaTransparencyModal=async s=>{this.target=s.target,this.postId=s.postId,this.adUserTargetingInfo=s.adUserTargetingInfo,this.impressionId=s.impressionId;const{gender:t,interests:a,locations:e,targetingCriteria:r}=this.adUserTargetingInfo,i={};t&&(i.gender=`${t}`),a&&a.length>0&&(i.interests=`${a.toString()}`),e&&e.length>0&&(i.locations=`${e.join("-")}`),r&&r.length>0&&(i.targeting_criteria=`${r.toString()}`),await this._activateFeature({name:n,queryParams:{post_id:this.postId,impression_id:this.impressionId,is_desktop:!!this.isDesktop,...i},renderMode:d.Contents});const o=this.querySelector("dsa-transparency-modal");o&&o.initModal()},this.closeDsaTransparencyModal=async()=>{await(this.dsaTransparencyModal?.updateComplete),this.target?.focus()},this.addEventListener("dsa-transparency-modal-close",this.closeDsaTransparencyModal)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(p.DsaTransparencyModal,this.initDsaTransparencyModal,!1)}disconnectedCallback(){this.pubsub.unsubscribe(p.DsaTransparencyModal,this.initDsaTransparencyModal),super.disconnectedCallback()}render(){return h`<slot></slot>`}};y.styles=[s],t([a({type:Boolean,attribute:"is-desktop"})],y.prototype,"isDesktop",void 0),t([e("dsa-transparency-modal")],y.prototype,"dsaTransparencyModal",void 0),t([r()],y.prototype,"postId",void 0),t([r()],y.prototype,"impressionId",void 0),t([r()],y.prototype,"adUserTargetingInfo",void 0),y=t([c("dsa-transparency-modal-provider")],y);
//# sourceMappingURL=dsa-transparency-modal-provider-client-js-e2ea86ea.js.map
